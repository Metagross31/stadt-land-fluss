(this["webpackJsonpstadt-land-fluss"]=this["webpackJsonpstadt-land-fluss"]||[]).push([[8],{161:function(e,t,n){"use strict";n.d(t,"k",(function(){return u})),n.d(t,"j",(function(){return p})),n.d(t,"g",(function(){return d})),n.d(t,"m",(function(){return m})),n.d(t,"e",(function(){return h})),n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return g})),n.d(t,"h",(function(){return E})),n.d(t,"i",(function(){return v})),n.d(t,"l",(function(){return y})),n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return O})),n.d(t,"f",(function(){return k}));var a=n(22),r=n(162),o=n(169),i=n(181),c=n.n(i),l=n(63),s=n(43),u=function(e,t){if(e>t.length)throw new Error("Cannot create more randomn unique letters than the number of possibleLetters provided!");for(var n=[],a=Object(r.a)(t),o=function(e){var t=c()(a);n.push(t),a=a.filter((function(e){return e!==t}))},i=0;i<e;i++)o();return n},p=function(e){return Array.from(e).map((function(e){return e[1]})).sort((function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0}))},d=function(e){return Object(s.e)(e,{points:l.s,star:!1,text:"",valid:!0})},m=function(e){return e.map((function(e){return Object(a.a)({},e,{text:e.text.trim(),valid:!!e.text})}))},h=function(e,t){var n=new Map;return e.forEach((function(a){var r=[];t.forEach((function(t){var n=new Map;e.forEach((function(e){n.set(e.id,!0)})),r.push(n)})),n.set(a.id,r)})),n},f=function(e,t){if(e.checkForDuplicates||e.onlyPlayerWithValidAnswer)for(var n=t.keys().next().value,a=t.get(n),r=0;r<a.length;r++)g(e,t,r)},g=function(e,t,n){(e.checkForDuplicates||e.onlyPlayerWithValidAnswer)&&Array.from(t.keys()).forEach((function(a){var r=t.get(a);r[n].valid&&(e.onlyPlayerWithValidAnswer&&b(a,t,n)?r[n].points=l.n:e.checkForDuplicates&&C(a,t,n)?r[n].points=l.o:r[n].points=l.s)}))},b=function(e,t,n){var a=Array.from(t.keys()).filter((function(t){return t!==e})),r=!0;return a.forEach((function(e){return r=r&&!t.get(e)[n].valid})),r},C=function(e,t,n){var a=Array.from(t.keys()).filter((function(t){return t!==e})),r=t.get(e)[n].text.toLowerCase().replace(/[^0-9a-z]/gi,"");return Object(o.some)(a,(function(e){var a=t.get(e)[n];return a.valid&&r===a.text.toLowerCase().replace(/[^0-9a-z]/gi,"")}))},E=function(e){return e<=3?1:2},v=function(e){var t=0;return e.forEach((function(e){return t=e?t:t+1})),t},y=function(e,t){var n=new Map;return e.forEach((function(e,a){if(!e){var r=t.get(a);r&&n.set(a,r)}})),p(n)},w=function(e,t){t.forEach((function(t){t.forEach((function(t){t.valid?e.creativeAnswersExtraPoints&&t.star&&(t.points=t.points+l.d):t.points=0}))}))},O=function(e,t){var n=[],a={};return e.forEach((function(e,t){return a[t]={playerName:e.name,points:0}})),t.forEach((function(e){e.forEach((function(e,t){var n=e.reduce((function(e,t){return e+t.points}),0);a[t].points+=n}))})),Object.keys(a).forEach((function(e){return n.push(a[e])})),n.sort((function(e,t){return t.points-e.points}))},k=function(e,t,n){var a=[];return n.forEach((function(n){n.forEach((function(n,r){var o=e.get(r);n.forEach((function(e,n){e.valid&&e.star&&a.push({category:t.categories[n],playerName:o.name,text:e.text})}))}))})),a}},163:function(e,t,n){"use strict";var a=n(186),r=n(67),o=n.n(r),i=n(0),c=n.n(i),l=n(164),s=n.n(l);t.a=function(e){return c.a.createElement("div",{className:s.a.button_wrapper},c.a.createElement(a.a,{type:"button",color:"default",variant:"contained",size:"large",startIcon:c.a.createElement(o.a,null),onClick:e.onReturnToDashboard},"Dashboard"))}},164:function(e,t,n){e.exports={button_wrapper:"ToDashboardButton_button_wrapper__1EtAB"}},178:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return u}));var a,r=n(151),o=n(0),i=n.n(o),c=n(26),l=n(179),s=n.n(l);!function(e){e.newgame="newgame",e.joingame="joingame"}(a||(a={}));var u=function(e){var t="newgame"===e.context?"ein neues Spiel erstellst":"einem anderen Spiel beitrittst",n="Du nimmst bereits an einem laufenden Spiel teil. Wenn du ".concat(t,",\n    kannst du nicht mehr in das alte Spiel zur\xfcckkehren!");return i.a.createElement("div",{className:"material-card-style"},i.a.createElement("p",{className:s.a.hint_text},i.a.createElement("span",{className:"rejoin-running-game-hint-highlighted"},"Achtung: "),n),i.a.createElement(r.a,{component:c.b,to:"/play",className:s.a.link},"\u21d2 Zur\xfcck ins laufende Spiel"))}},179:function(e,t,n){e.exports={hint_text:"RejoinRunningGameHint_hint_text__24Gb_",link:"RejoinRunningGameHint_link__2heEh"}},208:function(e,t,n){e.exports={options_label:"NewGameOptionsPanel_options_label__21M5o",radio_group:"NewGameOptionsPanel_radio_group__1oZ38",countdown_input:"NewGameOptionsPanel_countdown_input__kNFVz"}},210:function(e,t,n){e.exports={options_label:"NewGame_options_label__1i8NK"}},282:function(e,t,n){"use strict";n.r(t);var a,r=n(70),o=n(22),i=n(162),c=n(32),l=n(33),s=n(35),u=n(36),p=n(280),d=n(186),m=n(235),h=n(211),f=n.n(h),g=n(169),b=n(0),C=n.n(b),E=n(20),v=n(159),y=n(170),w=n(286),O=n(260),k=n(261),I=n(262),x=n(291),j=n(147),S=n(117),_=n(290),N=n(174),A=n.n(N),T=Object(S.a)((function(){return Object(_.a)({lessPadding:{padding:"0.375rem 0.5rem"},dialog:{minWidth:"20rem"}})})),D=function(e){var t=T(),n=e.onClose,a=e.open,r=Object(b.useState)(""),o=Object(y.a)(r,2),i=o[0],c=o[1],l=Object(b.useState)(!1),s=Object(y.a)(l,2),u=s[0],m=s[1],h=function(){n(null)};return C.a.createElement(w.a,{onClose:h,open:a},C.a.createElement("form",{onSubmit:function(e){e.preventDefault(),e.stopPropagation();var t=i.trim();""!==t?(c(""),m(!1),n(t)):(c(""),m(!0))},className:t.dialog,noValidate:!0,autoComplete:"off"},C.a.createElement(O.a,null,C.a.createElement(k.a,null,"Kategorie hinzuf\xfcgen"),C.a.createElement(p.a,{id:"new-category-input",autoFocus:!0,margin:"dense",fullWidth:!0,required:!0,value:i,error:u&&!i,onChange:function(e){return c(e.target.value)}})),C.a.createElement(I.a,null,C.a.createElement(d.a,{type:"button",onClick:h},"Abbrechen"),C.a.createElement(d.a,{type:"submit",color:"primary"},"Hinzuf\xfcgen"))))},P=function(e){var t=T(),n=Object(b.useState)(!1),a=Object(y.a)(n,2),r=a[0],o=a[1];return C.a.createElement(C.a.Fragment,null,C.a.createElement(x.a,{title:"Kategorie hinzuf\xfcgen",placement:"right"},C.a.createElement(j.a,{className:t.lessPadding,"aria-label":"Kategorie hinzuf\xfcgen",onClick:function(){return o(!0)}},C.a.createElement(A.a,null))),C.a.createElement(D,{open:r,onClose:function(t){return function(t){o(!1),t&&e.addCustomCategory(t)}(t)}}))},R=n(292),G=n(207),W=n.n(G),B=n(206),F=n.n(B);!function(e){e.available="available",e.selected="selected"}(a||(a={}));var z,V=Object(S.a)((function(e){return Object(_.a)({root:{display:"flex",justifyContent:"center",flexWrap:"wrap",padding:e.spacing(.5)},chip:{margin:e.spacing(.5)},chipIcon:{backgroundColor:"inherit"}})})),L=function(e){var t=V();return C.a.createElement("div",{className:t.root},e.chipsArray.map((function(n,a){return C.a.createElement(R.a,{key:"chip-to-".concat(e.chipType,"-").concat(a),color:"selected"===e.chipType?"primary":void 0,icon:"selected"===e.chipType?C.a.createElement(F.a,{className:"chip-icon-no-bg"}):C.a.createElement(W.a,null),label:n,className:t.chip,onClick:function(){return e.removeChip(n)}})})),e.children)},K=n(287),M=n(263),q=n(264),U=n(265),H=n(266),Z=n(285),J=n(119),Q=n(258),X=n(259),Y=n(267),$=n(284),ee=n(257),te=n(209),ne=n.n(te),ae=n(63);!function(e){e.checkForDuplicates="checkForDuplicates",e.creativeAnswersExtraPoints="creativeAnswersExtraPoints",e.onlyPlayerWithValidAnswer="onlyPlayerWithValidAnswer"}(z||(z={}));var re,oe=n(208),ie=n.n(oe),ce=function(e){return C.a.createElement(K.a,{className:"new-game-expansion-panel"},C.a.createElement(M.a,{expandIcon:C.a.createElement(ne.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},"Weitere Optionen"),C.a.createElement(q.a,null,C.a.createElement(U.a,{className:"game-options-list"},C.a.createElement(H.a,{control:C.a.createElement(Z.a,{checked:e.scoringOptions.checkForDuplicates,name:z.checkForDuplicates,color:"primary",onChange:e.handleGameOptionChange}),label:ae.e.checkForDuplicates}),C.a.createElement(H.a,{control:C.a.createElement(Z.a,{checked:e.scoringOptions.onlyPlayerWithValidAnswer,name:z.onlyPlayerWithValidAnswer,color:"primary",onChange:e.handleGameOptionChange}),label:ae.e.onlyPlayerWithValidAnswer}),C.a.createElement(H.a,{control:C.a.createElement(Z.a,{checked:e.scoringOptions.creativeAnswersExtraPoints,name:z.creativeAnswersExtraPoints,color:"primary",onChange:e.handleGameOptionChange}),label:ae.e.creativeAnswersExtraPoints})),C.a.createElement(J.a,null),C.a.createElement(Q.a,{component:"fieldset"},C.a.createElement(X.a,{component:"legend",className:ie.a.options_label},"Beenden der Runde durch:"),C.a.createElement(Y.a,{className:ie.a.radio_group,"aria-label":"Beenden der Runde",name:"usecountdown",value:e.useCountdown?ae.t.countdown:ae.t.player,onChange:e.handleUseCountdownChange},C.a.createElement(H.a,{value:ae.t.player,control:C.a.createElement($.a,{color:"primary"}),label:"Spieler"}),C.a.createElement(H.a,{value:ae.t.countdown,control:C.a.createElement($.a,{color:"primary"}),label:"Countdown (in Sekunden)"}),C.a.createElement(ee.a,{type:"number",value:e.durationOfCountdown,className:ie.a.countdown_input,disabled:!e.useCountdown,inputProps:{"aria-label":"Dauer des Countdowns",min:ae.j},onChange:e.handleCountdownInputChange}))),C.a.createElement(J.a,null),C.a.createElement("p",{className:ie.a.options_label},"Folgende Buchstaben ausschlie\xdfen:"),C.a.createElement(U.a,{row:!0,className:"letters-to-exclude"},ae.p.map((function(t,n){return C.a.createElement(H.a,{key:"slf-letters-to-exclude-".concat(n),control:C.a.createElement(Z.a,{checked:e.lettersToExclude.includes(t),color:"primary",onChange:function(n){return e.handleLetterToExcludeChange(n,t)}}),label:t})})))))},le=n(178),se=n(64),ue=n(163),pe=n(13),de=n(161),me=n(43),he=n(23),fe=n(210),ge=n.n(fe);!function(e){e.available="available",e.selected="selected"}(re||(re={}));var be=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,l=new Array(a),s=0;s<a;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).state={availableCategories:ae.a,durationOfCountdown:ae.b,isSnackbarOpen:!1,lettersToExclude:Object(i.a)(ae.r),nameInput:e.props.playerInfo?e.props.playerInfo.name:"",numberOfRoundsInput:ae.c,selectedCategories:ae.q,scoringOptions:{checkForDuplicates:!0,creativeAnswersExtraPoints:!1,onlyPlayerWithValidAnswer:!0},snackBarMessage:"",useCountdown:!1,validateInputs:!1},e.handleNameInputChange=function(t){e.setState({nameInput:t.target.value})},e.handleNumberOfRoundsInputChange=function(t){var n=+t.target.value;n>=ae.m&&n<=ae.i&&e.setState({numberOfRoundsInput:n})},e.handleGameOptionChange=function(t){e.setState({scoringOptions:Object(o.a)({},e.state.scoringOptions,Object(r.a)({},t.target.name,t.target.checked))})},e.handleCountdownInputChange=function(t){e.setState({durationOfCountdown:+t.target.value})},e.handleLetterToExcludeChange=function(t,n){var a=e.state.lettersToExclude,r=t.target.checked?[].concat(Object(i.a)(a),[n]):a.filter((function(e){return e!==n}));e.setState({lettersToExclude:r})},e.handleUseCountdownChange=function(t){e.setState({useCountdown:t.target.value===ae.t.countdown})},e.updateCategoryArrays=function(t,n){var a,r;n===re.selected?(a=e.state.selectedCategories.filter((function(e){return e!==t})),(r=Object(i.a)(e.state.availableCategories)).push(t)):(r=e.state.availableCategories.filter((function(e){return e!==t})),(a=Object(i.a)(e.state.selectedCategories)).push(t)),e.setState({availableCategories:r,selectedCategories:a})},e.addCustomCategory=function(t){e.setState({availableCategories:[].concat(Object(i.a)(e.state.availableCategories),[t])})},e.handleSubmit=function(t){t.preventDefault(),e.isReadyToStartGame()?e.startNewGame():e.setState({nameInput:e.state.nameInput.trim(),validateInputs:!0})},e.isReadyToStartGame=function(){return e.state.selectedCategories.length<ae.k?(e.showSnackBar("Du musst mindestens ".concat(ae.k," Kategorien ausw\xe4hlen!")),!1):ae.p.length-e.state.lettersToExclude.length<e.state.numberOfRoundsInput?(e.showSnackBar("Du hast zu viele Buchstaben ausgeschlossen!"),!1):!!e.state.nameInput.trim()},e.showSnackBar=function(t){return e.setState({isSnackbarOpen:!0,snackBarMessage:t})},e.handleSnackBarClose=function(){return e.setState({isSnackbarOpen:!1})},e.startNewGame=function(){var t=e.props.playerInfo,n=e.props.playerIdCreationTimestamp,a=e.state,r=a.durationOfCountdown,o=a.nameInput,i=a.numberOfRoundsInput,c=a.scoringOptions,l=a.selectedCategories,s=a.useCountdown,u=Object(v.a)();Object(he.f)(),Object(he.h)({id:t.id,idCreationTimestamp:n,name:o.trim()}),Object(he.j)({gameId:u,idCreationTimestamp:Object(me.b)(new Date),isPlayerAdmin:!0}),e.props.onSetGameData({gameConfig:{categories:l,durationOfCountdown:r,letters:Object(de.k)(i,Object(g.xor)(ae.p,e.state.lettersToExclude)),numberOfRounds:i,scoringOptions:c,useCountdown:s},gameId:u,isRejoiningGame:!1,playerInfo:{id:t.id,isAdmin:!0,name:o.trim()}}),e.props.history.push("/play")},e.returnToDashboard=function(){e.props.history.push("/")},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t="Anzahl Runden (".concat(ae.m,"-").concat(ae.i,")"),n=C.a.createElement("form",{onSubmit:this.handleSubmit,className:"app-form",noValidate:!0,autoComplete:"off"},C.a.createElement(p.a,{name:"nameInput",label:"Spielername (max. 20 Zeichen)",value:this.state.nameInput,className:"app-form-input",variant:"outlined",fullWidth:!0,required:!0,autoFocus:!0,error:this.state.validateInputs&&!this.state.nameInput,inputProps:{maxLength:"20"},onChange:this.handleNameInputChange}),C.a.createElement(p.a,{name:"numberOfRoundsInput",label:t,type:"number",value:this.state.numberOfRoundsInput,variant:"outlined",fullWidth:!0,required:!0,inputProps:{min:ae.m,max:ae.i},onChange:this.handleNumberOfRoundsInputChange}),C.a.createElement(ce,{durationOfCountdown:this.state.durationOfCountdown,lettersToExclude:this.state.lettersToExclude,scoringOptions:this.state.scoringOptions,useCountdown:this.state.useCountdown,handleCountdownInputChange:this.handleCountdownInputChange,handleGameOptionChange:this.handleGameOptionChange,handleLetterToExcludeChange:this.handleLetterToExcludeChange,handleUseCountdownChange:this.handleUseCountdownChange}),C.a.createElement("p",{className:ge.a.options_label},"Ausgew\xe4hlte Kategorien (mind. ",ae.k,"):"),C.a.createElement(L,{chipsArray:this.state.selectedCategories,chipType:a.selected,removeChip:function(t){return e.updateCategoryArrays(t,re.selected)}}),C.a.createElement("p",{className:ge.a.options_label},"Verf\xfcgbare Kategorien:"),C.a.createElement(L,{chipsArray:this.state.availableCategories,chipType:a.available,removeChip:function(t){return e.updateCategoryArrays(t,re.available)}},C.a.createElement(P,{addCustomCategory:this.addCustomCategory})),C.a.createElement("div",{className:"button-wrapper add-margin-top"},C.a.createElement(d.a,{type:"submit",color:"primary",variant:"contained",size:"large",startIcon:C.a.createElement(f.a,null)},"Spiel erstellen")));return C.a.createElement("div",{className:"main-content-wrapper"},this.props.gameId?C.a.createElement(le.a,{context:le.b.newgame}):null,C.a.createElement("div",{className:"material-card-style"},C.a.createElement(se.a,{showDivider:!0,text:"Neues Spiel"}),n),C.a.createElement(ue.a,{onReturnToDashboard:this.returnToDashboard}),C.a.createElement(m.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:this.state.isSnackbarOpen,autoHideDuration:3e3,message:this.state.snackBarMessage,onClose:this.handleSnackBarClose}))}},{key:"componentDidUpdate",value:function(e){this.props.playerInfo&&this.props.playerInfo!==e.playerInfo&&this.setState({nameInput:this.props.playerInfo.name})}}]),n}(b.Component);t.default=Object(E.b)((function(e){return{gameId:e.gameId,playerIdCreationTimestamp:e.playerIdCreationTimestamp,playerInfo:e.playerInfo}}),(function(e){return{onSetGameData:function(t){return e(Object(pe.i)(t))}}}))(be)}}]);
//# sourceMappingURL=8.d25915da.chunk.js.map