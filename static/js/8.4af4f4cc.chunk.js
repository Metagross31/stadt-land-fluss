(this["webpackJsonpstadt-land-fluss"]=this["webpackJsonpstadt-land-fluss"]||[]).push([[8],{161:function(e,t,n){"use strict";n.d(t,"k",(function(){return u})),n.d(t,"j",(function(){return d})),n.d(t,"g",(function(){return p})),n.d(t,"m",(function(){return m})),n.d(t,"e",(function(){return h})),n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return g})),n.d(t,"h",(function(){return E})),n.d(t,"i",(function(){return v})),n.d(t,"l",(function(){return y})),n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return O})),n.d(t,"f",(function(){return k}));var a=n(22),r=n(162),o=n(169),i=n(181),c=n.n(i),l=n(63),s=n(43),u=function(e,t){if(e>t.length)throw new Error("Cannot create more randomn unique letters than the number of possibleLetters provided!");for(var n=[],a=Object(r.a)(t),o=function(e){var t=c()(a);n.push(t),a=a.filter((function(e){return e!==t}))},i=0;i<e;i++)o();return n},d=function(e){return Array.from(e).map((function(e){return e[1]})).sort((function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0}))},p=function(e){return Object(s.e)(e,{points:l.s,star:!1,text:"",valid:!0})},m=function(e){return e.map((function(e){return Object(a.a)({},e,{text:e.text.trim(),valid:!!e.text})}))},h=function(e,t){var n=new Map;return e.forEach((function(a){var r=[];t.forEach((function(t){var n=new Map;e.forEach((function(e){n.set(e.id,!0)})),r.push(n)})),n.set(a.id,r)})),n},f=function(e,t){if(e.checkForDuplicates||e.onlyPlayerWithValidAnswer)for(var n=t.keys().next().value,a=t.get(n),r=0;r<a.length;r++)g(e,t,r)},g=function(e,t,n){(e.checkForDuplicates||e.onlyPlayerWithValidAnswer)&&Array.from(t.keys()).forEach((function(a){var r=t.get(a);r[n].valid&&(e.onlyPlayerWithValidAnswer&&b(a,t,n)?r[n].points=l.n:e.checkForDuplicates&&C(a,t,n)?r[n].points=l.o:r[n].points=l.s)}))},b=function(e,t,n){var a=Array.from(t.keys()).filter((function(t){return t!==e})),r=!0;return a.forEach((function(e){return r=r&&!t.get(e)[n].valid})),r},C=function(e,t,n){var a=Array.from(t.keys()).filter((function(t){return t!==e})),r=t.get(e)[n].text.toLowerCase().replace(/[^0-9a-z]/gi,"");return Object(o.some)(a,(function(e){var a=t.get(e)[n];return a.valid&&r===a.text.toLowerCase().replace(/[^0-9a-z]/gi,"")}))},E=function(e){return e<=3?1:2},v=function(e){var t=0;return e.forEach((function(e){return t=e?t:t+1})),t},y=function(e,t){var n=new Map;return e.forEach((function(e,a){if(!e){var r=t.get(a);r&&n.set(a,r)}})),d(n)},w=function(e,t){t.forEach((function(t){t.forEach((function(t){t.valid?e.creativeAnswersExtraPoints&&t.star&&(t.points=t.points+l.d):t.points=0}))}))},O=function(e,t){var n=[],a={};return e.forEach((function(e,t){return a[t]={playerName:e.name,points:0}})),t.forEach((function(e){e.forEach((function(e,t){var n=e.reduce((function(e,t){return e+t.points}),0);a[t].points+=n}))})),Object.keys(a).forEach((function(e){return n.push(a[e])})),n.sort((function(e,t){return t.points-e.points}))},k=function(e,t,n){var a=[];return n.forEach((function(n){n.forEach((function(n,r){var o=e.get(r);n.forEach((function(e,n){e.valid&&e.star&&a.push({category:t.categories[n],playerName:o.name,text:e.text})}))}))})),a}},163:function(e,t,n){"use strict";var a=n(186),r=n(67),o=n.n(r),i=n(0),c=n.n(i),l=n(164),s=n.n(l);t.a=function(e){return c.a.createElement("div",{className:s.a.button_wrapper},c.a.createElement(a.a,{type:"button",color:"default",variant:"contained",size:"large",startIcon:c.a.createElement(o.a,null),onClick:e.onReturnToDashboard},"Dashboard"))}},164:function(e,t,n){e.exports={button_wrapper:"ToDashboardButton_button_wrapper__1EtAB"}},178:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return u}));var a,r=n(151),o=n(0),i=n.n(o),c=n(26),l=n(179),s=n.n(l);!function(e){e.newgame="newgame",e.joingame="joingame"}(a||(a={}));var u=function(e){var t="newgame"===e.context?"ein neues Spiel erstellst":"einem anderen Spiel beitrittst",n="Du nimmst bereits an einem laufenden Spiel teil. Wenn du ".concat(t,",\n    kannst du nicht mehr in das alte Spiel zur\xfcckkehren!");return i.a.createElement("div",{className:"material-card-style"},i.a.createElement("p",{className:s.a.hint_text},i.a.createElement("span",{className:"rejoin-running-game-hint-highlighted"},"Achtung: "),n),i.a.createElement(r.a,{component:c.b,to:"/play",className:s.a.link},"\u21d2 Zur\xfcck ins laufende Spiel"))}},179:function(e,t,n){e.exports={hint_text:"RejoinRunningGameHint_hint_text__24Gb_",link:"RejoinRunningGameHint_link__2heEh"}},205:function(e,t,n){e.exports={less_padding:"AddCustomCategory_less_padding__t9AWk",dialog_min_width:"AddCustomCategory_dialog_min_width__3OgRe"}},209:function(e,t,n){e.exports={options_label:"NewGameOptionsPanel_options_label__21M5o",radio_group:"NewGameOptionsPanel_radio_group__1oZ38",countdown_input:"NewGameOptionsPanel_countdown_input__kNFVz"}},211:function(e,t,n){e.exports={options_label:"NewGame_options_label__1i8NK"}},283:function(e,t,n){"use strict";n.r(t);var a,r=n(70),o=n(22),i=n(162),c=n(32),l=n(33),s=n(35),u=n(36),d=n(281),p=n(186),m=n(236),h=n(212),f=n.n(h),g=n(169),b=n(0),C=n.n(b),E=n(20),v=n(159),y=n(170),w=n(287),O=n(261),k=n(262),_=n(263),x=n(291),I=n(147),j=n(174),S=n.n(j),N=n(205),A=n.n(N),T=function(e){var t=e.onClose,n=e.open,a=Object(b.useState)(""),r=Object(y.a)(a,2),o=r[0],i=r[1],c=Object(b.useState)(!1),l=Object(y.a)(c,2),s=l[0],u=l[1],m=function(){t(null)};return C.a.createElement(w.a,{onClose:m,open:n},C.a.createElement("form",{onSubmit:function(e){e.preventDefault(),e.stopPropagation();var n=o.trim();""!==n?(i(""),u(!1),t(n)):(i(""),u(!0))},className:A.a.dialog_min_width,noValidate:!0,autoComplete:"off"},C.a.createElement(O.a,null,C.a.createElement(k.a,null,"Kategorie hinzuf\xfcgen"),C.a.createElement(d.a,{id:"new-category-input",autoFocus:!0,margin:"dense",fullWidth:!0,required:!0,value:o,error:s&&!o,onChange:function(e){return i(e.target.value)}})),C.a.createElement(_.a,null,C.a.createElement(p.a,{type:"button",onClick:m},"Abbrechen"),C.a.createElement(p.a,{type:"submit",color:"primary"},"Hinzuf\xfcgen"))))},D=function(e){var t=Object(b.useState)(!1),n=Object(y.a)(t,2),a=n[0],r=n[1];return C.a.createElement(C.a.Fragment,null,C.a.createElement(x.a,{title:"Kategorie hinzuf\xfcgen",placement:"right"},C.a.createElement(I.a,{className:A.a.less_padding,"aria-label":"Kategorie hinzuf\xfcgen",onClick:function(){return r(!0)}},C.a.createElement(S.a,null))),C.a.createElement(T,{open:a,onClose:function(t){return function(t){r(!1),t&&e.addCustomCategory(t)}(t)}}))},P=n(293),R=n(117),G=n(292),W=n(208),B=n.n(W),F=n(207),z=n.n(F);!function(e){e.available="available",e.selected="selected"}(a||(a={}));var V,L=Object(R.a)((function(e){return Object(G.a)({root:{display:"flex",justifyContent:"center",flexWrap:"wrap",padding:e.spacing(.5)}})})),K=function(e){var t=L();return C.a.createElement("div",{className:t.root},e.chipsArray.map((function(t,n){return C.a.createElement(P.a,{key:"chip-to-".concat(e.chipType,"-").concat(n),color:"selected"===e.chipType?"primary":void 0,icon:"selected"===e.chipType?C.a.createElement(z.a,{className:"chip-icon-no-bg"}):C.a.createElement(B.a,null),label:t,className:"slf-chip-array-item",onClick:function(){return e.removeChip(t)}})})),e.children)},M=n(288),q=n(264),U=n(265),H=n(266),Z=n(267),J=n(286),Q=n(119),X=n(259),Y=n(260),$=n(268),ee=n(285),te=n(258),ne=n(210),ae=n.n(ne),re=n(63);!function(e){e.checkForDuplicates="checkForDuplicates",e.creativeAnswersExtraPoints="creativeAnswersExtraPoints",e.onlyPlayerWithValidAnswer="onlyPlayerWithValidAnswer"}(V||(V={}));var oe,ie=n(209),ce=n.n(ie),le=function(e){return C.a.createElement(M.a,{className:"new-game-expansion-panel"},C.a.createElement(q.a,{expandIcon:C.a.createElement(ae.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},"Weitere Optionen"),C.a.createElement(U.a,null,C.a.createElement(H.a,{className:"game-options-list"},C.a.createElement(Z.a,{control:C.a.createElement(J.a,{checked:e.scoringOptions.checkForDuplicates,name:V.checkForDuplicates,color:"primary",onChange:e.handleGameOptionChange}),label:re.e.checkForDuplicates}),C.a.createElement(Z.a,{control:C.a.createElement(J.a,{checked:e.scoringOptions.onlyPlayerWithValidAnswer,name:V.onlyPlayerWithValidAnswer,color:"primary",onChange:e.handleGameOptionChange}),label:re.e.onlyPlayerWithValidAnswer}),C.a.createElement(Z.a,{control:C.a.createElement(J.a,{checked:e.scoringOptions.creativeAnswersExtraPoints,name:V.creativeAnswersExtraPoints,color:"primary",onChange:e.handleGameOptionChange}),label:re.e.creativeAnswersExtraPoints})),C.a.createElement(Q.a,null),C.a.createElement(X.a,{component:"fieldset"},C.a.createElement(Y.a,{component:"legend",className:ce.a.options_label},"Beenden der Runde durch:"),C.a.createElement($.a,{className:ce.a.radio_group,"aria-label":"Beenden der Runde",name:"usecountdown",value:e.useCountdown?re.t.countdown:re.t.player,onChange:e.handleUseCountdownChange},C.a.createElement(Z.a,{value:re.t.player,control:C.a.createElement(ee.a,{color:"primary"}),label:"Spieler"}),C.a.createElement(Z.a,{value:re.t.countdown,control:C.a.createElement(ee.a,{color:"primary"}),label:"Countdown (in Sekunden)"}),C.a.createElement(te.a,{type:"number",value:e.durationOfCountdown,className:ce.a.countdown_input,disabled:!e.useCountdown,inputProps:{"aria-label":"Dauer des Countdowns",min:re.j},onChange:e.handleCountdownInputChange}))),C.a.createElement(Q.a,null),C.a.createElement("p",{className:ce.a.options_label},"Folgende Buchstaben ausschlie\xdfen:"),C.a.createElement(H.a,{row:!0,className:"letters-to-exclude"},re.p.map((function(t,n){return C.a.createElement(Z.a,{key:"slf-letters-to-exclude-".concat(n),control:C.a.createElement(J.a,{checked:e.lettersToExclude.includes(t),color:"primary",onChange:function(n){return e.handleLetterToExcludeChange(n,t)}}),label:t})})))))},se=n(178),ue=n(64),de=n(163),pe=n(13),me=n(161),he=n(43),fe=n(23),ge=n(211),be=n.n(ge);!function(e){e.available="available",e.selected="selected"}(oe||(oe={}));var Ce=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,l=new Array(a),s=0;s<a;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).state={availableCategories:re.a,durationOfCountdown:re.b,isSnackbarOpen:!1,lettersToExclude:Object(i.a)(re.r),nameInput:e.props.playerInfo?e.props.playerInfo.name:"",numberOfRoundsInput:re.c,selectedCategories:re.q,scoringOptions:{checkForDuplicates:!0,creativeAnswersExtraPoints:!1,onlyPlayerWithValidAnswer:!0},snackBarMessage:"",useCountdown:!1,validateInputs:!1},e.handleNameInputChange=function(t){e.setState({nameInput:t.target.value})},e.handleNumberOfRoundsInputChange=function(t){var n=+t.target.value;n>=re.m&&n<=re.i&&e.setState({numberOfRoundsInput:n})},e.handleGameOptionChange=function(t){e.setState({scoringOptions:Object(o.a)({},e.state.scoringOptions,Object(r.a)({},t.target.name,t.target.checked))})},e.handleCountdownInputChange=function(t){e.setState({durationOfCountdown:+t.target.value})},e.handleLetterToExcludeChange=function(t,n){var a=e.state.lettersToExclude,r=t.target.checked?[].concat(Object(i.a)(a),[n]):a.filter((function(e){return e!==n}));e.setState({lettersToExclude:r})},e.handleUseCountdownChange=function(t){e.setState({useCountdown:t.target.value===re.t.countdown})},e.updateCategoryArrays=function(t,n){var a,r;n===oe.selected?(a=e.state.selectedCategories.filter((function(e){return e!==t})),(r=Object(i.a)(e.state.availableCategories)).push(t)):(r=e.state.availableCategories.filter((function(e){return e!==t})),(a=Object(i.a)(e.state.selectedCategories)).push(t)),e.setState({availableCategories:r,selectedCategories:a})},e.addCustomCategory=function(t){e.setState({availableCategories:[].concat(Object(i.a)(e.state.availableCategories),[t])})},e.handleSubmit=function(t){t.preventDefault(),e.isReadyToStartGame()?e.startNewGame():e.setState({nameInput:e.state.nameInput.trim(),validateInputs:!0})},e.isReadyToStartGame=function(){return e.state.selectedCategories.length<re.k?(e.showSnackBar("Du musst mindestens ".concat(re.k," Kategorien ausw\xe4hlen!")),!1):re.p.length-e.state.lettersToExclude.length<e.state.numberOfRoundsInput?(e.showSnackBar("Du hast zu viele Buchstaben ausgeschlossen!"),!1):!!e.state.nameInput.trim()},e.showSnackBar=function(t){return e.setState({isSnackbarOpen:!0,snackBarMessage:t})},e.handleSnackBarClose=function(){return e.setState({isSnackbarOpen:!1})},e.startNewGame=function(){var t=e.props.playerInfo,n=e.props.playerIdCreationTimestamp,a=e.state,r=a.durationOfCountdown,o=a.nameInput,i=a.numberOfRoundsInput,c=a.scoringOptions,l=a.selectedCategories,s=a.useCountdown,u=Object(v.a)();Object(fe.f)(),Object(fe.h)({id:t.id,idCreationTimestamp:n,name:o.trim()}),Object(fe.j)({gameId:u,idCreationTimestamp:Object(he.b)(new Date),isPlayerAdmin:!0}),e.props.onSetGameData({gameConfig:{categories:l,durationOfCountdown:r,letters:Object(me.k)(i,Object(g.xor)(re.p,e.state.lettersToExclude)),numberOfRounds:i,scoringOptions:c,useCountdown:s},gameId:u,isRejoiningGame:!1,playerInfo:{id:t.id,isAdmin:!0,name:o.trim()}}),e.props.history.push("/play")},e.returnToDashboard=function(){e.props.history.push("/")},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t="Anzahl Runden (".concat(re.m,"-").concat(re.i,")"),n=C.a.createElement("form",{onSubmit:this.handleSubmit,className:"app-form",noValidate:!0,autoComplete:"off"},C.a.createElement(d.a,{name:"nameInput",label:"Spielername (max. 20 Zeichen)",value:this.state.nameInput,className:"app-form-input",variant:"outlined",fullWidth:!0,required:!0,autoFocus:!0,error:this.state.validateInputs&&!this.state.nameInput,inputProps:{maxLength:"20"},onChange:this.handleNameInputChange}),C.a.createElement(d.a,{name:"numberOfRoundsInput",label:t,type:"number",value:this.state.numberOfRoundsInput,variant:"outlined",fullWidth:!0,required:!0,inputProps:{min:re.m,max:re.i},onChange:this.handleNumberOfRoundsInputChange}),C.a.createElement(le,{durationOfCountdown:this.state.durationOfCountdown,lettersToExclude:this.state.lettersToExclude,scoringOptions:this.state.scoringOptions,useCountdown:this.state.useCountdown,handleCountdownInputChange:this.handleCountdownInputChange,handleGameOptionChange:this.handleGameOptionChange,handleLetterToExcludeChange:this.handleLetterToExcludeChange,handleUseCountdownChange:this.handleUseCountdownChange}),C.a.createElement("p",{className:be.a.options_label},"Ausgew\xe4hlte Kategorien (mind. ",re.k,"):"),C.a.createElement(K,{chipsArray:this.state.selectedCategories,chipType:a.selected,removeChip:function(t){return e.updateCategoryArrays(t,oe.selected)}}),C.a.createElement("p",{className:be.a.options_label},"Verf\xfcgbare Kategorien:"),C.a.createElement(K,{chipsArray:this.state.availableCategories,chipType:a.available,removeChip:function(t){return e.updateCategoryArrays(t,oe.available)}},C.a.createElement(D,{addCustomCategory:this.addCustomCategory})),C.a.createElement("div",{className:"button-wrapper add-margin-top"},C.a.createElement(p.a,{type:"submit",color:"primary",variant:"contained",size:"large",startIcon:C.a.createElement(f.a,null)},"Spiel erstellen")));return C.a.createElement("div",{className:"main-content-wrapper"},this.props.gameId?C.a.createElement(se.a,{context:se.b.newgame}):null,C.a.createElement("div",{className:"material-card-style"},C.a.createElement(ue.a,{showDivider:!0,text:"Neues Spiel"}),n),C.a.createElement(de.a,{onReturnToDashboard:this.returnToDashboard}),C.a.createElement(m.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:this.state.isSnackbarOpen,autoHideDuration:3e3,message:this.state.snackBarMessage,onClose:this.handleSnackBarClose}))}},{key:"componentDidUpdate",value:function(e){this.props.playerInfo&&this.props.playerInfo!==e.playerInfo&&this.setState({nameInput:this.props.playerInfo.name})}}]),n}(b.Component);t.default=Object(E.b)((function(e){return{gameId:e.gameId,playerIdCreationTimestamp:e.playerIdCreationTimestamp,playerInfo:e.playerInfo}}),(function(e){return{onSetGameData:function(t){return e(Object(pe.i)(t))}}}))(Ce)}}]);
//# sourceMappingURL=8.4af4f4cc.chunk.js.map