(this["webpackJsonpstadt-land-fluss"]=this["webpackJsonpstadt-land-fluss"]||[]).push([[9],{184:function(e,t,n){"use strict";n.d(t,"l",(function(){return u})),n.d(t,"k",(function(){return d})),n.d(t,"j",(function(){return h})),n.d(t,"g",(function(){return p})),n.d(t,"n",(function(){return f})),n.d(t,"e",(function(){return b})),n.d(t,"d",(function(){return m})),n.d(t,"c",(function(){return g})),n.d(t,"h",(function(){return y})),n.d(t,"i",(function(){return O})),n.d(t,"m",(function(){return P})),n.d(t,"a",(function(){return x})),n.d(t,"b",(function(){return w})),n.d(t,"f",(function(){return R}));var a=n(12),r=n(185),i=n(189),s=n(205),o=n.n(s),c=n(77),l=n(50),u=function(e,t){if(e>t.length)throw new Error("Cannot create more randomn unique letters than the number of possibleLetters provided!");for(var n=[],a=Object(r.a)(t),i=function(e){var t=o()(a);n.push(t),a=a.filter((function(e){return e!==t}))},s=0;s<e;s++)i();return n},d=function(e,t,n){for(var a=Object(r.a)(n),i=e-n.length,s=t.filter((function(e){return!n.includes(e)})),c=function(e){var t=o()(s);a.push(t),s=s.filter((function(e){return e!==t}))},l=0;l<i;l++)c();return a},h=function(e){return Array.from(e).map((function(e){return e[1]})).sort((function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0}))},p=function(e){return Object(l.e)(e,{points:c.s,star:!1,text:"",valid:!0})},f=function(e){return e.map((function(e){return Object(a.a)(Object(a.a)({},e),{},{text:e.text.trim(),valid:!!e.text})}))},b=function(e,t){var n=new Map;return e.forEach((function(a){var r=[];t.forEach((function(){var t=new Map;e.forEach((function(e){t.set(e.id,!0)})),r.push(t)})),n.set(a.id,r)})),n},m=function(e,t){if(e.checkForDuplicates||e.onlyPlayerWithValidAnswer)for(var n=t.keys().next().value,a=t.get(n),r=0;r<a.length;r++)g(e,t,r)},g=function(e,t,n){(e.checkForDuplicates||e.onlyPlayerWithValidAnswer)&&Array.from(t.keys()).forEach((function(a){var r=t.get(a);r[n].valid&&(e.onlyPlayerWithValidAnswer&&j(a,t,n)?r[n].points=c.n:e.checkForDuplicates&&v(a,t,n)?r[n].points=c.o:r[n].points=c.s)}))},j=function(e,t,n){var a=Array.from(t.keys()).filter((function(t){return t!==e})),r=!0;return a.forEach((function(e){return r=r&&!t.get(e)[n].valid})),r},v=function(e,t,n){var a=Array.from(t.keys()).filter((function(t){return t!==e})),r=t.get(e)[n].text.toLowerCase().replace(/[^0-9a-z]/gi,"");return Object(i.some)(a,(function(e){var a=t.get(e)[n];return a.valid&&r===a.text.toLowerCase().replace(/[^0-9a-z]/gi,"")}))},y=function(e){return e<=3?1:2},O=function(e){var t=0;return e.forEach((function(e){return t=e?t:t+1})),t},P=function(e,t){var n=new Map;return e.forEach((function(e,a){if(!e){var r=t.get(a);r&&n.set(a,r)}})),h(n)},x=function(e,t){t.forEach((function(t){t.forEach((function(t){t.valid?e.creativeAnswersExtraPoints&&t.star&&(t.points=t.points+c.d):t.points=0}))}))},w=function(e,t){var n=[],a={};return e.forEach((function(e,t){return a[t]={playerName:e.name,points:0}})),t.forEach((function(e){e.forEach((function(e,t){var n=e.reduce((function(e,t){return e+t.points}),0);a[t].points+=n}))})),Object.keys(a).forEach((function(e){return n.push(a[e])})),n.sort((function(e,t){return t.points-e.points}))},R=function(e,t,n){var a=[];return n.forEach((function(n){n.forEach((function(n,r){var i=e.get(r);n.forEach((function(e,n){e.valid&&e.star&&a.push({category:t.categories[n],playerName:i.name,text:e.text})}))}))})),a}},190:function(e,t,n){"use strict";var a,r;n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r})),function(e){e.checkForDuplicates="checkForDuplicates",e.creativeAnswersExtraPoints="creativeAnswersExtraPoints",e.onlyPlayerWithValidAnswer="onlyPlayerWithValidAnswer"}(a||(a={})),function(e){e.allPlayersSubmit="allPlayers",e.countdownEnds="countdownEnds",e.firstPlayerSubmits="firstPlayer"}(r||(r={}))},207:function(e,t,n){"use strict";var a=n(2),r=n(0),i=n.n(r),s=n(77),o=n(208),c=n.n(o);t.a=function(e){var t=e.rules;return t.checkForDuplicates||t.onlyPlayerWithValidAnswer||t.creativeAnswersExtraPoints?Object(a.jsxs)(i.a.Fragment,{children:[e.isForGameResultsPage?Object(a.jsx)("h3",{className:c.a.heading,children:"Regeln f\xfcr die Punktevergabe"}):null,e.isForGameResultsPage?null:Object(a.jsx)("h4",{className:c.a.heading,children:"Regeln f\xfcr die Punktevergabe"}),Object(a.jsxs)("ul",{className:c.a.list,children:[t.checkForDuplicates?Object(a.jsx)("li",{children:s.e.checkForDuplicates}):null,t.onlyPlayerWithValidAnswer?Object(a.jsx)("li",{children:s.e.onlyPlayerWithValidAnswer}):null,t.creativeAnswersExtraPoints?Object(a.jsx)("li",{children:s.e.creativeAnswersExtraPoints}):null]})]}):null}},208:function(e,t,n){e.exports={heading:"ScoringOptionsList_heading__24MfE",list:"ScoringOptionsList_list__2_T80"}},253:function(e,t,n){e.exports={adminPanel:"AdminPanel_adminPanel__2uOTL",menuButton:"AdminPanel_menuButton__3FKcR",menuIcon:"AdminPanel_menuIcon__37tXS",dialogContent:"AdminPanel_dialogContent__2IGzL",dialogContentText:"AdminPanel_dialogContentText__pdkCU"}},255:function(e,t,n){},257:function(e,t,n){e.exports={answer_box_wrapper:"PhaseEvaluateRound_answer_box_wrapper__2bEV4",answer_box:"PhaseEvaluateRound_answer_box__3FEJ-",answer_box_creative:"PhaseEvaluateRound_answer_box_creative__QcFuI",player_name:"PhaseEvaluateRound_player_name__3vIEv",answer:"PhaseEvaluateRound_answer__26B5S",invalid_answer:"PhaseEvaluateRound_invalid_answer__24pkd",button_wrapper:"PhaseEvaluateRound_button_wrapper__2ww_I",points_wrapper:"PhaseEvaluateRound_points_wrapper__d9qw8",points:"PhaseEvaluateRound_points__38f4X",search_link:"PhaseEvaluateRound_search_link__1u1C7",auto_reject_icon:"PhaseEvaluateRound_auto_reject_icon__aG-MH"}},265:function(e,t,n){},266:function(e,t,n){e.exports={link_label:"JoinGameLink_link_label__1tx1j"}},268:function(e){e.exports=JSON.parse('{"publishKey":"pub-c-cea13e04-e3aa-434b-806f-fc890fbd45bf","subscribeKey":"sub-c-66cfccd4-6c89-11ea-a7c4-5e95b827fd71"}')},320:function(e,t,n){"use strict";n.r(t);var a,r=n(12),i=n(185),s=n(38),o=n(39),c=n(41),l=n(40),u=n(2),d=n(189),h=n(58),p=n(249),f=n.n(p),b=n(219),m=n(0),g=n.n(m),j=n(84),v=n(27),y=n(59),O=n(191),P=n(328),x=n(299),w=n(300),R=n(301),C=n(168),k=n(167),I=n(147),E=n(174),S=n(307),A=n(308),_=n(254),N=n.n(_),F=n(200),M=n.n(F),T=n(184),D=n(253),G=n.n(D),L=function(e){var t=e.onClose,n=e.open;return Object(u.jsxs)(P.a,{onClose:function(){return t(!1)},open:n,children:[Object(u.jsx)(x.a,{classes:{root:G.a.dialogContent},children:e.playerToBeKicked?Object(u.jsxs)(w.a,{classes:{root:G.a.dialogContentText},children:['"With great power comes great responsibility" \u2013 Willst du ',e.playerToBeKicked.name," wirklich aus dem Spiel werfen?"]}):null}),Object(u.jsxs)(R.a,{children:[Object(u.jsx)(C.a,{type:"button",onClick:function(){return t(!1)},children:"Abbrechen"}),Object(u.jsx)(C.a,{type:"button",color:"primary",onClick:function(){return t(!0)},children:"Rauswerfen"})]})]})},z=function(e){var t=Object(m.useState)(null),n=Object(O.a)(t,2),a=n[0],r=n[1],i=Object(m.useState)(!1),s=Object(O.a)(i,2),o=s[0],c=s[1],l=Object(m.useState)(null),d=Object(O.a)(l,2),h=d[0],p=d[1],f=new Map;e.allPlayers.forEach((function(e,t){e.isAdmin||f.set(t,e)}));var b=Object(T.j)(f);return Object(u.jsxs)("div",{className:G.a.adminPanel,children:[Object(u.jsx)(k.a,{className:G.a.menuButton,title:"Mitspieler verwalten","aria-label":"Mitspieler verwalten","aria-controls":"admin-panel","aria-haspopup":"true",color:"primary",onClick:function(e){r(e.currentTarget)},children:Object(u.jsx)(M.a,{className:G.a.menuIcon,fontSize:"large"})}),Object(u.jsx)(I.a,{id:"admin-panel",anchorEl:a,keepMounted:!0,open:Boolean(a),onClose:function(){r(null)},children:b.map((function(e,t){return Object(u.jsxs)(E.a,{onClick:function(){return t=e,r(null),p(t),void c(!0);var t},children:[Object(u.jsx)(S.a,{children:Object(u.jsx)(N.a,{color:"secondary"})}),Object(u.jsx)(A.a,{primary:"".concat(e.name," rauswerfen")})]},"menu-item-delete-player-".concat(t))}))}),Object(u.jsx)(L,{open:o,playerToBeKicked:h,onClose:function(t){c(!1),t&&h&&e.kickPlayer(h.id)}})]})},W=(n(255),n(77)),V=n(46),B=function(){function e(t,n){Object(s.a)(this,e),this.x=t,this.y=n,this.radius=3.5}return Object(o.a)(e,[{key:"draw",value:function(e){e.save(),e.translate(this.x,this.y),e.fillStyle="white",e.fillRect(0,0,this.radius,this.radius),e.restore()}}]),e}(),U=function(){function e(t,n){var a=this;Object(s.a)(this,e),this.letters=t,this.callbackWhenAnimationDone=n,this.canvas=void 0,this.ctx=void 0,this.currentPos=void 0,this.width=void 0,this.height=void 0,this.particlePositions=void 0,this.particles=void 0,this.tmpCanvas=void 0,this.tmpCtx=void 0,this.time=void 0,this.counter=0,this.myInterval=void 0,this.activeTheme=void 0,this.animate=function(){requestAnimationFrame(a.animate),a.ctx.fillStyle=a.activeTheme.animationBackgroundColor,a.ctx.fillRect(0,0,a.width,a.height),a.animateParticles()},this.canvas=document.querySelector("#letter-animation-canvas"),this.ctx=this.canvas.getContext("2d");var r=document.querySelector("main");this.activeTheme=V.a.find((function(e){return r.classList.contains(e.className)})),this.width=r.offsetWidth,this.height=r.offsetHeight,this.particlePositions=[],this.particles=[],this.tmpCanvas=document.createElement("canvas"),this.tmpCtx=this.tmpCanvas.getContext("2d"),this.canvas.width=this.width,this.canvas.height=this.height,this.particlePositions=[],this.currentPos=0,this.time=""}return Object(o.a)(e,[{key:"init",value:function(){var e=this;this.myInterval=setInterval((function(){e.counter<e.letters.length&&(e.changeLetter(),e.getPixels(e.tmpCanvas,e.tmpCtx)),e.counter++,e.counter>e.letters.length+1&&(clearInterval(e.myInterval),e.callbackWhenAnimationDone())}),W.h),this.makeParticles(1e3),this.animate()}},{key:"changeLetter",value:function(){this.time=this.letters[this.currentPos],this.currentPos++,this.currentPos>=this.letters.length&&(this.currentPos=0)}},{key:"makeParticles",value:function(e){for(var t=0;t<=e;t++){var n=this.width/2+400*Math.random()-200,a=this.height/2+400*Math.random()-200;this.particles.push(new B(n,a))}}},{key:"getPixels",value:function(e,t){var n=this.time;e.width=window.innerWidth,e.height=window.innerHeight,t.fillStyle="red",t.font="italic bold 330px Noto Serif",t.fillText(n,e.width/2-t.measureText(n).width/2,e.height/2+100);var a=t.getImageData(0,0,e.width,e.height),r=new Uint32Array(a.data.buffer);this.particlePositions.length>0&&(this.particlePositions=[]);for(var i=0;i<e.height;i+=6)for(var s=0;s<e.width;s+=6)r[i*e.width+s]&&this.particlePositions.push({x:s,y:i})}},{key:"animateParticles",value:function(){for(var e,t,n=0,a=this.particles.length;n<a;n++)e=this.particles[n],t=this.particlePositions[n],this.particles.indexOf(e)===this.particlePositions.indexOf(t)&&(e.x+=.3*(t.x-e.x),e.y+=.3*(t.y-e.y),e.draw(this.ctx))}}]),e}(),K=function(e){var t=Object(i.a)(W.p).filter((function(t){return t!==e.letterToUnveil})),n=[].concat(Object(i.a)(Object(T.l)(W.g-1,t)),[e.letterToUnveil]);return Object(m.useEffect)((function(){new U(n,e.callbackWhenAnimationDone).init()})),Object(u.jsx)("canvas",{id:"letter-animation-canvas"})},q=n(93),J=n(7),H=n(179),X=n(309),Q=n(333),Z=n(331),Y=n(321),$=n(132),ee=n(261),te=n.n(ee),ne=n(262),ae=n.n(ne),re=n(260),ie=n.n(re),se=n(192),oe=n.n(se),ce=n(259),le=n.n(ce),ue=n(199),de=n.n(ue),he=n(130),pe=n(256),fe=n.n(pe),be=Object(he.a)({centerContent:{display:"flex",justifyContent:"center"},chip:{height:"3rem",marginBottom:"0",marginTop:"1rem",borderRadius:"5px",fontWeight:"normal",fontSize:"1.2rem",boxShadow:"0 2px 4px rgba(0,0,0,.501961)"}}),me=function(e){var t=be(),n=e.currentLetter,a=e.currentRound,r=(e.isEvaluationPhase,e.numberOfRounds);return Object(u.jsx)("div",{className:t.centerContent,children:Object(u.jsx)(Z.a,{color:"primary",component:"h2",icon:Object(u.jsx)(fe.a,{}),label:"Runde ".concat(a," von ").concat(r,": \u201e").concat(n,"\u201c"),className:t.chip})})},ge=n(257),je=n.n(ge),ve=Object(J.a)((function(e){return Object(H.a)({badge:{right:-3,top:"100%",border:"2px solid ".concat(e.palette.background.paper),padding:"0 4px"}})}))(X.a),ye=function(e){var t=Object(m.useState)(e.playersThatFinishedEvaluation.has(e.playerInfo.id)),n=Object(O.a)(t,2),a=n[0],r=n[1],i=e.allPlayers,s=e.currentRound,o=e.currentRoundEvaluation,c=e.gameConfig,l=e.playerInfo,d=e.playersThatFinishedEvaluation,h=e.gameRounds[s-1],p=c.letters[s-1],f=Object(T.j)(i),b=[];f.forEach((function(e){d.has(e.id)||b.push(e.name)}));var j=function(t,n){var r=f[n],s=o.get(r.id)[t],c=s.get(l.id),d=Object(T.m)(s,i),p=0===d.length?"Keine Ablehnungen":"Abgelehnt von "+d.map((function(e){return e.name})).join(", ");return!!h.get(r.id)[t].text?function(){var i=Object(u.jsx)(k.a,{className:"slf-evaluation-button",color:c?"default":"secondary",size:"small","aria-label":c?"Antwort ablehnen":"Antwort akzeptieren",disabled:a,onClick:function(){return function(t,n,a){e.updateEvaluationOfPlayerInput({categoryIndex:t,evaluatedPlayerId:n,markedAsValid:!a})}(t,r.id,c)},children:Object(u.jsx)(ve,{badgeContent:d.length,color:"secondary",children:Object(u.jsx)(de.a,{})})});return a?i:Object(u.jsx)(Q.a,{title:p,arrow:!0,children:i},"slf-evaluation-tooltip-".concat(t,"-").concat(n))}():Object(u.jsx)(Q.a,{title:"Automatisch abgelehnt",arrow:!0,children:Object(u.jsx)(de.a,{color:a?"disabled":"secondary",className:je.a.auto_reject_icon})},"slf-evaluation-tooltip-".concat(t,"-").concat(n))},v=function(t,n){var r=f[n],i=h.get(r.id)[t],s=a||r.id===e.playerInfo.id,o=a?"disabled":"primary",c=function(){return Object(u.jsx)(k.a,{color:"primary",size:"small",disabled:s,onClick:function(){return function(t,n,a){e.updateIsPlayerInputVeryCreativeStatus({categoryIndex:t,evaluatedPlayerId:n,markedAsCreative:!a})}(t,r.id,i.star)},children:i.star?Object(u.jsx)(oe.a,{color:o}):Object(u.jsx)(le.a,{color:o})})};return s?c():Object(u.jsx)(Q.a,{title:i.star?"Kreativ-Markierung aufheben":"Als besonders kreativ markieren",placement:"bottom",arrow:!0,children:c()})},y=function(e,t){var n=c.categories[e],a=f[t],r=h.get(a.id)[e].text,i="https://www.ecosia.org/search?q=".concat(encodeURIComponent(n),"+").concat(encodeURIComponent(r));return Object(u.jsx)("a",{className:je.a.search_link,href:i,target:"_blank",rel:"noopener noreferrer","aria-label":"Begriff nachschlagen",children:Object(u.jsx)(Q.a,{title:"Begriff nachschlagen",placement:"bottom",arrow:!0,children:Object(u.jsx)(ie.a,{color:"primary"})})})},P=function(e){var t="+"+(e.valid?function(e){return c.scoringOptions.creativeAnswersExtraPoints&&e.star?e.points+W.d:e.points}(e):0),n=e.valid?"primary":"default";return Object(u.jsxs)("div",{className:je.a.points_wrapper,children:[Object(u.jsx)(Z.a,{label:t,color:n,classes:{root:je.a.points}}),Object(u.jsx)("span",{className:"sr-only",children:"Punkte"})]})};return Object(u.jsxs)(g.a.Fragment,{children:[Object(u.jsx)(me,{currentLetter:p,currentRound:s,isEvaluationPhase:!0,numberOfRounds:c.numberOfRounds}),c.categories.map((function(e,t){return Object(u.jsxs)("div",{className:"material-card-style",children:[Object(u.jsx)("h3",{id:"slf-category-no-"+t,className:"section-header",children:e}),Object(u.jsx)("div",{role:"list","aria-labelledby":"slf-category-no-"+t,children:f.map((function(e,n){return function(e,t){var n=f[t],a=h.get(n.id)[e],r=!!a.text,i=a.valid,s=i&&a.star,o=Object(u.jsx)("span",{className:"sr-only",children:"Leere Antwort wurde automatisch abgelehnt."}),c=Object(u.jsx)("span",{className:"sr-only",children:"Antwort wurde abgelehnt."}),l=Object(u.jsx)("span",{className:"sr-only",children:"Antwort wurde als besonders kreativ markiert."});return Object(u.jsxs)("div",{role:"listitem",className:je.a.answer_box_wrapper,children:[Object(u.jsxs)(Y.a,{boxShadow:1,tabIndex:0,className:s?je.a.answer_box_creative:je.a.answer_box,children:[Object(u.jsxs)("p",{className:je.a.player_name,children:[Object(u.jsx)("span",{className:"sr-only",children:"Antwort von"}),n.name,Object(u.jsx)("span",{className:"sr-only",children:":"})]}),Object(u.jsx)($.a,{light:!0,"aria-hidden":"true"}),Object(u.jsxs)("p",{className:i?je.a.answer:je.a.invalid_answer,"aria-hidden":!r,children:[r?a.text:"(leer)",Object(u.jsx)("span",{className:"sr-only",children:"."})]}),r?null:o,r&&!i?c:null,s?l:null,P(a)]}),Object(u.jsxs)("div",{className:je.a.button_wrapper,children:[r?y(e,t):null,i?v(e,t):null,j(e,t)]})]},"slf-answer-box-wrapper-".concat(e,"-").concat(t))}(t,n)}))})]},"slf-evaluation-for-category-no-"+t)})),Object(u.jsxs)("div",{className:"material-card-style",children:["Best\xe4tigung ausstehend: ",Object(u.jsx)("span",{className:"bold-text",children:b.join(", ")})]}),Object(u.jsx)(k.a,{type:"button",className:"fixed-bottom-right-button",color:"secondary",title:"Best\xe4tigen","aria-label":a?"Du hast bereits best\xe4tigt":"Best\xe4tigen",onClick:function(){a||(r(!0),e.sendEvaluationFinishedMessage())},children:a?Object(u.jsx)(te.a,{fontSize:"large"}):Object(u.jsx)(ae.a,{fontSize:"large"})})]})},Oe=n(322),Pe=n(310),xe=n(264),we=n.n(xe),Re=n(190),Ce=n(263),ke=Object(he.a)((function(e){return Object(H.a)({countdown:{position:"fixed",right:"1.5rem",bottom:"1rem",backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText,padding:"0.5rem 1rem",fontSize:"1.5rem",boxShadow:"0 2px 4px rgba(0, 0, 0, .401961)",borderRadius:"5px"}})})),Ie=function(e){var t=ke();return Object(u.jsx)(Ce.a,{date:Date.now()+1e3*e.duration,renderer:function(e){return Object(u.jsxs)("div",{className:t.countdown,children:[Object(Ce.b)(e.minutes),":",Object(Ce.b)(e.seconds)]})},onComplete:e.onComplete})},Ee=g.a.memo(Ie),Se=function(e){var t=e.currentRound,n=e.gameConfig,a=e.gameRoundInputs,s=n.letters[t-1],o=Object(u.jsx)(k.a,{type:"button",className:"fixed-bottom-right-button",color:"secondary",title:"Abschicken","aria-label":"Abschicken",onClick:e.finishRoundOnUserAction,children:Object(u.jsx)(we.a,{fontSize:"large"})}),c=Object(u.jsx)(Ee,{duration:e.gameConfig.durationOfCountdown,onComplete:e.finishRoundOnCountdownComplete});return Object(u.jsxs)(g.a.Fragment,{children:[Object(u.jsx)(me,{currentLetter:s,currentRound:t,isEvaluationPhase:!1,numberOfRounds:n.numberOfRounds}),Object(u.jsxs)("form",{className:"app-form",noValidate:!0,autoComplete:"off",children:[n.categories.map((function(t,n){var o="slf-input-for-category-no-"+n;return Object(u.jsxs)("div",{className:"material-card-style",children:[Object(u.jsxs)("label",{htmlFor:o,className:"section-header",children:[t,Object(u.jsxs)("span",{className:"sr-only",children:[" mit Buchstabe (",s,")"]})]}),Object(u.jsx)(Oe.a,{value:a[n].text,variant:"outlined",fullWidth:!0,InputProps:{id:o,startAdornment:Object(u.jsxs)(Pe.a,{position:"start",children:[s,":"]}),spellCheck:!1},onChange:function(t){return function(t,n){var s=Object(i.a)(a);s[n]=Object(r.a)(Object(r.a)({},s[n]),{},{text:t.target.value}),e.updateCurrentRoundInputs(s)}(t,n)}})]},o)})),n.endRoundMode===Re.a.countdownEnds?c:o]})]})},Ae=(n(265),n(267)),_e=n.n(Ae);!function(e){e.currentRoundInputs="currentRoundInputs",e.dataForCurrentGame="dataForCurrentGame",e.evaluationFinished="evaluationFinished",e.evaluationOfPlayerInput="evaluationOfPlayerInput",e.isPlayerInputVeryCreative="isPlayerInputVeryCreative",e.kickPlayer="kickPlayer",e.requestGameData="requestGameData",e.roundFinished="roundFinished",e.startGame="startGame"}(a||(a={}));var Ne=function(){function e(t){Object(s.a)(this,e),this.payload=t}return Object(o.a)(e,[{key:"toPubNubMessage",value:function(){return{type:a.currentRoundInputs,payload:this.payload}}}]),e}(),Fe=function(){function e(t){Object(s.a)(this,e),this.payload=t}return Object(o.a)(e,[{key:"toPubNubMessage",value:function(){return{type:a.evaluationOfPlayerInput,payload:this.payload}}}]),e}(),Me=function(){function e(t){Object(s.a)(this,e),this.payload=t}return Object(o.a)(e,[{key:"toPubNubMessage",value:function(){return{type:a.isPlayerInputVeryCreative,payload:this.payload}}}]),e}(),Te=function(){function e(t){Object(s.a)(this,e),this.payload=t}return Object(o.a)(e,[{key:"toPubNubMessage",value:function(){return{type:a.kickPlayer,payload:this.payload}}}]),e}(),De=function(){function e(t){Object(s.a)(this,e),this.payload=t}return Object(o.a)(e,[{key:"toPubNubMessage",value:function(){return{type:a.dataForCurrentGame,payload:this.payload}}}]),e}(),Ge=n(330),Le=n(198),ze=n.n(Le),We=n(50),Ve=n(266),Be=n.n(Ve),Ue=function(e){var t=window.location.href,n=t.slice(0,t.length-5)+"/joingame?id="+e.gameId;return Object(u.jsxs)(g.a.Fragment,{children:[Object(u.jsx)("p",{className:Be.a.link_label,children:"Teile diesen Link mit Freunden:"}),Object(u.jsx)(Ge.a,{name:"idInput",value:n,className:"app-form-input",readOnly:!0,fullWidth:!0,endAdornment:Object(u.jsx)(Pe.a,{position:"end",children:Object(u.jsx)(k.a,{title:"Link zum Spiel kopieren","aria-label":"Link zum Spiel kopieren",onClick:function(){Object(We.d)(n),e.onLinkCopiedToClipboard()},children:Object(u.jsx)(ze.a,{})})}),inputProps:{tabIndex:-1}})]})},Ke=n(206),qe=n.n(Ke),Je=Object(he.a)((function(e){return Object(H.a)({root:{display:"flex",flexWrap:"wrap",padding:e.spacing(.5)},chip:{margin:e.spacing(.5)}})})),He=function(e){var t=Je(),n=Object(T.j)(e.players);return Object(u.jsx)("div",{className:t.root,role:"list",children:n.map((function(e,n){return Object(u.jsx)(Z.a,{role:"listitem",className:t.chip,icon:Object(u.jsx)(qe.a,{}),color:e.isAdmin?"secondary":"primary",label:e.isAdmin?"".concat(e.name," (Admin)"):e.name},"player-name-".concat(n))}))})},Xe=n(207),Qe=n(78),Ze=function(e){var t=e.allPlayers,n=e.gameId,r=e.playerInfo,i=e.gameConfig,s=Object(h.b)(),o=s.enqueueSnackbar,c=(s.closeSnackbar,function(){var t="Link zum Spiel wurde in die Zwischenablage kopiert";o(t,{"aria-live":"off"}),e.informScreenReaderUser(t)}),l=Object(u.jsxs)("p",{className:"wait-for-start-animation",children:["Warte auf Spielbeginn ",Object(u.jsx)("span",{children:"."}),Object(u.jsx)("span",{children:"."}),Object(u.jsx)("span",{children:"."})]}),d=function(e){switch(e.endRoundMode){case Re.a.allPlayersSubmit:return"Wenn alle Spielenden ihre Antworten abgeschickt haben";case Re.a.countdownEnds:return"Countdown (".concat(e.durationOfCountdown," Sekunden)");case Re.a.firstPlayerSubmits:return"Schnellster Spieler";default:return""}};return Object(u.jsxs)(g.a.Fragment,{children:[Object(u.jsxs)("div",{className:"material-card-style",children:[Object(u.jsx)(Qe.a,{text:"Warteraum"}),Object(u.jsxs)("div",{className:"players-wrapper",children:[Object(u.jsxs)("h3",{children:["Mitspieler (",e.allPlayers.size,"):"]}),Object(u.jsx)(He,{players:e.allPlayers})]}),e.gameConfig?Object(u.jsxs)(g.a.Fragment,{children:[Object(u.jsx)($.a,{}),Object(u.jsx)("h3",{children:"Spieleinstellungen"}),Object(u.jsxs)("div",{className:"game-settings",children:[Object(u.jsx)("h4",{children:"Spiel-ID"}),Object(u.jsx)("p",{children:e.gameId}),Object(u.jsx)("h4",{children:"Runden"}),Object(u.jsx)("p",{children:i.numberOfRounds}),Object(u.jsx)("h4",{children:"Kategorien"}),Object(u.jsx)("p",{children:i.categories.join(", ")}),Object(u.jsx)("h4",{children:"Beenden der Runde durch"}),Object(u.jsx)("p",{children:d(i)})]}),Object(u.jsx)(Xe.a,{isForGameResultsPage:!1,rules:i.scoringOptions})]}):null,Object(u.jsx)($.a,{}),r.isAdmin?Object(u.jsx)("div",{className:"button-wrapper add-margin-top",children:Object(u.jsx)(C.a,{color:"primary",variant:"contained",size:"large",startIcon:Object(u.jsx)(_e.a,{}),disabled:t.size<W.l,onClick:function(){return e.sendPubNubMessage({type:a.startGame})},children:"Starten"})}):l]}),r.isAdmin?Object(u.jsx)("div",{className:"material-card-style",children:Object(u.jsx)(Ue,{gameId:n,onLinkCopiedToClipboard:c})}):null]})},Ye=function(e){var t,n=Object(b.b)(),a=function(){var t;t=e.playerInfo.isAdmin?{gameConfig:e.gameConfig,playerInfo:e.playerInfo}:{playerInfo:e.playerInfo},n.setState({channels:[e.gameChannel],state:t})},r=function(){n.hereNow({channels:[e.gameChannel],includeUUIDs:!0,includeState:!0},(function(t,n){console.log("PubNub hereNow",n);var a=function(t){var n=[];return(t.channels[e.gameChannel]||[]).occupants.forEach((function(t){var a=t.state;a&&a.playerInfo&&a.playerInfo.id!==e.playerInfo.id&&n.push(a)})),n}(n);0!==a.length||e.playerInfo.isAdmin&&!e.isRejoiningGame?!e.isRejoiningGame&&a.length>0&&e.addPlayers.apply(e,[!1].concat(Object(i.a)(a))):e.navigateToJoinGamePage("Es wurde kein offenes Spiel mit der ID ".concat(e.gameChannel," gefunden!"))}))};return Object(m.useEffect)((function(){var i={message:function(t){console.log("PubNub message event",t),t.message.type&&e.processPubNubMessage(t)},presence:function(t){if(console.log("PubNub presence event",t),"state-change"===t.action){var n=t.state;n.playerInfo.id!==e.playerInfo.id&&e.addPlayers(!0,n)}},status:function(i){console.log("PubNub status event",i),"PNConnectedCategory"===i.category&&(console.log("Player is connected to PubNub game channel"),n.history({channel:e.gameChannel,count:10},(function(n,i){!e.isRejoiningGame&&i.messages.length>0?e.navigateToJoinGamePage("Das Spiel mit der ID ".concat(e.gameChannel," wurde bereits gestartet. Du kannst einem laufenden Spiel nicht beitreten!")):(r(),e.isRejoiningGame||(a(),t=setTimeout(r,3e3)))})))}};return n.addListener(i),n.subscribe({channels:[e.gameChannel],withPresence:!0}),function(){t&&clearTimeout(t),n.removeListener(i),n.unsubscribeAll()}})),null},$e=g.a.memo(Ye),et=n(268),tt={publishKey:et.publishKey,subscribeKey:et.subscribeKey,uuid:void 0,ssl:!0},nt={A:"Anton",B:"Berta",C:"C\xe4sar",D:"David",E:"Emilia",F:"Frieda",G:"Gustav",H:"Heinrich",I:"Ida",J:"Jakob",K:"Konrad",L:"Ludwig",M:"Martha",N:"Nordpol",O:"Otto",P:"Paula",Q:"Quelle",R:"Richard",S:"Samuel",T:"Theodora",U:"Ulrich",V:"Viktoria",W:"Wilhelmine",X:"Xanthippe",Y:"Ypsilon",Z:"Zacharias"},at="Du bist dem Spiel erfolgreich beigetreten. Sobald der Administrator des Spiels auf Starten klickt, beginnt die erste Runde.",rt=n(17),it=n(28),st=function(e,t,n){if(e.id===n)return!1;if(e.isAdmin)return!0;var a=t.get(n);if(a&&a.isAdmin){var r=Object(d.cloneDeep)(t);return r.delete(n),Array.from(r).map((function(e){return e[1]})).sort((function(e,t){return e.id<t.id?-1:e.id>t.id?1:0}))[0].id===e.id}return!1},ot=function(e,t){var n=new Map;e.forEach((function(e,a){n.set(a,e.map((function(e){var n=[];return t.forEach((function(t){return n.push(e.get(t.id))})),n})))}));var a=[];return t.forEach((function(e){return a.push(n.get(e.id))})),a},ct=function(e,t){var n=new Map;return t.forEach((function(a,r){var i=e[r].map((function(e){var n=new Map;return t.forEach((function(t,a){return n.set(t.id,e[a])})),n}));n.set(a.id,i)})),n},lt=function(e,t){var n=[];return t.forEach((function(t){var a=e.get(t.id);n.push(a.map((function(e){return e.star})))})),n},ut=function(e){for(var t=[],n=1;n<=e;n++){var a=Object(it.e)(n);a&&t.push(a)}return t},dt=function(e,t,n,a){a.forEach((function(e,a){var r=t.get(a);e.forEach((function(e,t){e.valid&&(e.valid=Object(T.i)(r[t])<n)}))})),Object(T.d)(e,a)},ht=function(e,t,n){t.forEach((function(t,a){var r=e[a];n.get(t.id).forEach((function(e,t){return e.star=r[t]}))}))},pt=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={a11yMessagePolite:"",allPlayers:new Map,currentPhase:W.f.waitingToStart,currentRound:1,currentRoundEvaluation:new Map,currentRoundInputs:[],gameConfig:null,gameRounds:[new Map],playersThatFinishedEvaluation:new Map,playersThatFinishedRound:new Map,showLetterAnimation:!1,showLoadingScreen:!0},e.pubNubClient=void 0,e.informScreenReaderUser=function(t){return e.setState({a11yMessagePolite:t})},e.sendPubNubMessage=function(t){e.pubNubClient.publish({channel:e.props.gameId,message:t,storeInHistory:!0,ttl:1},(function(e,t){return console.log("PubNub Publish:",e,t)}))},e.createCurrentPhaseElement=function(){switch(e.state.currentPhase){case W.f.waitingToStart:return Object(u.jsx)(Ze,{allPlayers:e.state.allPlayers,gameConfig:e.state.gameConfig,gameId:e.props.gameId,playerInfo:e.props.playerInfo,informScreenReaderUser:e.informScreenReaderUser,sendPubNubMessage:e.sendPubNubMessage});case W.f.fillOutTextfields:return Object(u.jsx)(Se,{currentRound:e.state.currentRound,gameConfig:e.state.gameConfig,gameRoundInputs:e.state.currentRoundInputs,updateCurrentRoundInputs:e.updateCurrentRoundInputs,finishRoundOnCountdownComplete:e.finishRoundOnCountdownComplete,finishRoundOnUserAction:e.finishRoundOnUserAction});case W.f.evaluateRound:return Object(u.jsx)(ye,{allPlayers:e.state.allPlayers,currentRound:e.state.currentRound,currentRoundEvaluation:e.state.currentRoundEvaluation,gameConfig:e.state.gameConfig,gameRounds:e.state.gameRounds,playerInfo:e.props.playerInfo,playersThatFinishedEvaluation:e.state.playersThatFinishedEvaluation,sendEvaluationFinishedMessage:e.sendEvaluationFinishedMessage,updateEvaluationOfPlayerInput:e.updateEvaluationOfPlayerInput,updateIsPlayerInputVeryCreativeStatus:e.updateIsPlayerInputVeryCreativeStatus});default:return null}},e.callbackWhenAnimationDone=function(){var t=e.state,n=t.currentRound,a=t.gameConfig,r=null===a||void 0===a?void 0:a.letters[e.state.currentRound-1],i=nt[r],s="Runde ".concat(n,": Buchstabe ").concat(r," wie ").concat(i,".");e.setState({a11yMessagePolite:s,showLetterAnimation:!1})},e.navigateToJoinGamePage=function(t){Object(it.f)(),e.props.onResetAppState({joinGameErrorMessage:t}),e.props.history.push("/joingame")},e.addPlayers=function(t){if(e.state.currentPhase===W.f.waitingToStart){for(var n=null,a=Object(d.cloneDeep)(e.state.allPlayers),r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];if(i.forEach((function(t){a.set(t.playerInfo.id,t.playerInfo),!e.state.gameConfig&&t.gameConfig&&(n=t.gameConfig)})),n)Object(it.i)(n),e.setState({a11yMessagePolite:at,allPlayers:a,gameConfig:n,showLoadingScreen:!1});else{var o=t?"".concat(i[0].playerInfo.name," ist dem Spiel beigetreten."):"";e.setState({a11yMessagePolite:o,allPlayers:a})}}},e.processPubNubMessage=function(t){var n=t.message;switch(n.type){case a.startGame:e.startGame();break;case a.roundFinished:e.onRoundFinishedMessage(t.publisher);break;case a.currentRoundInputs:e.addPlayerInputForFinishedRound(t.publisher,n.payload);break;case a.evaluationOfPlayerInput:e.processEvaluationOfPlayerInput(t.publisher,n.payload);break;case a.isPlayerInputVeryCreative:e.processIsPlayerInputVeryCreativeStatus(n.payload);break;case a.evaluationFinished:e.countPlayerAsEvaluationFinished(t.publisher);break;case a.kickPlayer:e.removePlayerFromGame(n.payload);break;case a.requestGameData:st(e.props.playerInfo,e.state.allPlayers,t.publisher)&&(e.state.allPlayers.has(t.publisher)?e.sendDataForCurrentGame(t.publisher):e.sendKickPlayerMessage(t.publisher));break;case a.dataForCurrentGame:e.restoreDataForCurrentGame(n.payload)}},e.startGame=function(){var t=e.state.gameConfig,n=Object(T.e)(e.state.allPlayers,t.categories);e.setState({a11yMessagePolite:"Spiel beginnt. ".concat(e.state.currentRound,". Buchstabe wird ermittelt."),currentPhase:W.f.fillOutTextfields,currentRoundEvaluation:n,currentRoundInputs:Object(T.g)(t.categories.length),showLetterAnimation:!0})},e.updateCurrentRoundInputs=function(t){e.setState({currentRoundInputs:t})},e.finishRoundOnCountdownComplete=function(){e.setState({showLoadingScreen:!0}),e.props.playerInfo.isAdmin&&e.sendPubNubMessage({type:a.roundFinished})},e.finishRoundOnUserAction=function(){var t=Object(d.cloneDeep)(e.state.playersThatFinishedRound);t.set(e.props.playerInfo.id,!0),e.setState({playersThatFinishedRound:t,showLoadingScreen:!0}),e.sendPubNubMessage({type:a.roundFinished})},e.onRoundFinishedMessage=function(t){var n=e.state.gameConfig,a=e.state.allPlayers.get(t);if(n.endRoundMode===Re.a.allPlayersSubmit){var r=Object(d.cloneDeep)(e.state.playersThatFinishedRound);if(r.set(t,!0),t===e.props.playerInfo.id)e.setState({playersThatFinishedRound:r}),e.stopRoundAndSendInputs();else{var i="".concat(null===a||void 0===a?void 0:a.name," hat Antworten abgeschickt.");e.props.enqueueSnackbar(i,{"aria-live":"off"}),e.setState({a11yMessagePolite:i,playersThatFinishedRound:r})}}else{var s=n.endRoundMode===Re.a.countdownEnds?"Der Countdown ist abgelaufen. Die Auswertung von Runde ".concat(e.state.currentRound," beginnt."):"".concat(null===a||void 0===a?void 0:a.name," hat Runde ").concat(e.state.currentRound," beendet. Die Auswertung beginnt.");e.informScreenReaderUser(s),e.stopRoundAndSendInputs()}},e.stopRoundAndSendInputs=function(){var t=new Ne(Object(T.n)(e.state.currentRoundInputs));e.sendPubNubMessage(t.toPubNubMessage())},e.addPlayerInputForFinishedRound=function(t,n){var a=Object(d.cloneDeep)(e.state.gameRounds),r=e.state.currentRound-1;if(a[r].set(t,n),a[r].size===e.state.allPlayers.size){var i="Runde ".concat(e.state.currentRound," ist zu Ende. Wertet nun die Antworten aus.");Object(T.d)(e.state.gameConfig.scoringOptions,a[r]),Object(it.k)(e.state.currentRound,a[r]),e.setState({a11yMessagePolite:i,currentPhase:W.f.evaluateRound,gameRounds:a,showLoadingScreen:!1})}else e.setState({gameRounds:a})},e.getWaitingForPlayers=function(){var t=[];return Object(T.j)(e.state.allPlayers).forEach((function(n){e.state.playersThatFinishedRound.has(n.id)||t.push(n.name)})),t},e.updateEvaluationOfPlayerInput=function(t){var n=new Fe(t);e.sendPubNubMessage(n.toPubNubMessage())},e.processEvaluationOfPlayerInput=function(t,n){var a,r,i;if(e.state.allPlayers.has(t)){var s=n.categoryIndex,o=n.evaluatedPlayerId,c=n.markedAsValid,l=Object(d.cloneDeep)(e.state.currentRoundEvaluation),u=l.get(o);u[s].set(t,c);var h=Object(d.cloneDeep)(e.state.gameRounds),p=Object(T.i)(u[s])<Object(T.h)(e.state.allPlayers.size),f=h[e.state.currentRound-1],b=f.get(o)[s];b.valid=p,Object(T.c)(e.state.gameConfig.scoringOptions,f,s);var m=null===(a=e.state.allPlayers.get(t))||void 0===a?void 0:a.name,g=null===(r=e.state.allPlayers.get(o))||void 0===r?void 0:r.name,j=c?"akzeptiert":"abgelehnt",v=null===(i=e.state.gameConfig)||void 0===i?void 0:i.categories[s],y="".concat(m," hat Antwort ").concat(b.text," von ").concat(g," in Kategorie ").concat(v," ").concat(j,".");e.setState({a11yMessagePolite:y,currentRoundEvaluation:l,gameRounds:h})}},e.updateIsPlayerInputVeryCreativeStatus=function(t){var n=new Me(t);e.sendPubNubMessage(n.toPubNubMessage())},e.processIsPlayerInputVeryCreativeStatus=function(t){var n,a,r=t.categoryIndex,i=t.evaluatedPlayerId,s=t.markedAsCreative,o=Object(d.cloneDeep)(e.state.gameRounds),c=o[e.state.currentRound-1].get(i)[r];c.star=s;var l=null===(n=e.state.allPlayers.get(i))||void 0===n?void 0:n.name,u=s?"bewertet":"abgelehnt",h=null===(a=e.state.gameConfig)||void 0===a?void 0:a.categories[r],p="Antwort ".concat(c.text," von ").concat(l," in Kategorie ").concat(h," wurde als besonders kreativ ").concat(u,".");e.setState({a11yMessagePolite:p,gameRounds:o})},e.sendEvaluationFinishedMessage=function(){return e.sendPubNubMessage({type:a.evaluationFinished})},e.countPlayerAsEvaluationFinished=function(t){var n=Object(d.cloneDeep)(e.state.playersThatFinishedEvaluation);if(n.set(t,!0),n.size===e.state.allPlayers.size)e.processEvaluationsAndStartNextRoundOrFinishGame();else{var a,r="".concat(null===(a=e.state.allPlayers.get(t))||void 0===a?void 0:a.name," hat die Auswertung der Antworten best\xe4tigt.");e.setState({a11yMessagePolite:r,playersThatFinishedEvaluation:n})}},e.processEvaluationsAndStartNextRoundOrFinishGame=function(){var t=e.state,n=t.allPlayers,a=t.currentRound,r=e.state.gameConfig,s=Object(d.cloneDeep)(e.state.gameRounds);if(Object(T.a)(r.scoringOptions,s[a-1]),a===r.numberOfRounds)Object(it.f)(),e.props.onSetDataOfFinishedGame({allPlayers:n,gameConfig:r,gameRounds:s}),e.props.history.push("/results");else{Object(it.k)(e.state.currentRound,s[a-1]);var o=a+1;e.setState({a11yMessagePolite:"Auswertung beendet. Der n\xe4chste Buchstabe wird ermittelt.",currentPhase:W.f.fillOutTextfields,currentRoundEvaluation:Object(T.e)(n,r.categories),currentRoundInputs:Object(T.g)(r.categories.length),currentRound:o,gameRounds:[].concat(Object(i.a)(s),[new Map]),playersThatFinishedEvaluation:new Map,playersThatFinishedRound:new Map,showLetterAnimation:!0})}},e.sendKickPlayerMessage=function(t){var n=new Te(t);e.sendPubNubMessage(n.toPubNubMessage())},e.removePlayerFromGame=function(t){if(e.props.playerInfo.id===t)return Object(it.f)(),e.props.onResetAppState(),void e.props.history.push("/");if(e.state.allPlayers.has(t)){var n=Object(d.cloneDeep)(e.state.allPlayers);n.delete(t);var a=Object(d.cloneDeep)(e.state.currentRoundEvaluation);a.delete(t);var r=Object(d.cloneDeep)(e.state.gameRounds);r.forEach((function(e){return e.delete(t)}));var i=Object(d.cloneDeep)(e.state.playersThatFinishedEvaluation);i.delete(t),e.setState({allPlayers:n,currentRoundEvaluation:a,gameRounds:r,playersThatFinishedEvaluation:i}),e.state.currentPhase===W.f.evaluateRound&&i.size===n.size&&e.processEvaluationsAndStartNextRoundOrFinishGame()}},e.sendDataForCurrentGame=function(t){var n=e.state,a=n.allPlayers,r=n.currentPhase,i=n.currentRound,s=n.currentRoundEvaluation,o=n.gameRounds,c=Object(T.j)(a),l=r===W.f.evaluateRound?ot(s,c):[],u=r===W.f.evaluateRound?lt(o[i-1],c):[],d=new De({compressedGameRoundEvaluation:l,compressedMarkedAsCreativeFlags:u,currentPhase:r,currentRound:i,playersThatFinishedEvaluation:Object(We.c)(e.state.playersThatFinishedEvaluation),requestingPlayerId:t,sortedPlayers:c});e.sendPubNubMessage(d.toPubNubMessage())},e.restoreDataForCurrentGame=function(t){if(e.props.playerInfo.id===t.requestingPlayerId){var n=Object(it.c)(),a=t.currentPhase===W.f.evaluateRound?t.currentRound:t.currentRound-1,r=ut(a);if(n&&r.length===a){var i,s=new Map;if(t.sortedPlayers.forEach((function(e){return s.set(e.id,e)})),t.currentPhase===W.f.evaluateRound){var o=r[t.currentRound-1];i=ct(t.compressedGameRoundEvaluation,t.sortedPlayers),dt(n.scoringOptions,i,Object(T.h)(s.size),o),ht(t.compressedMarkedAsCreativeFlags,t.sortedPlayers,o)}else r.push(new Map),i=Object(T.e)(s,n.categories);e.setState({allPlayers:s,currentPhase:t.currentPhase,currentRound:t.currentRound,currentRoundEvaluation:i,currentRoundInputs:Object(T.g)(n.categories.length),gameConfig:n,gameRounds:r,playersThatFinishedEvaluation:Object(We.a)(t.playersThatFinishedEvaluation),showLoadingScreen:!1})}else console.log("Error: Can't restore game session because data is missing in local storage!"),e.navigateToJoinGamePage("Die R\xfcckkehr in das laufende Spiel ist nicht m\xf6glich, da die Daten nicht wiederhergestellt werden konnten!")}},e}return Object(o.a)(n,[{key:"render",value:function(){if(null===this.props.gameId||null===this.props.playerInfo)return null;this.pubNubClient||(this.pubNubClient=new f.a(Object(r.a)(Object(r.a)({},tt),{},{uuid:this.props.playerInfo.id})));var e=Object(u.jsx)(K,{letterToUnveil:this.state.gameConfig?this.state.gameConfig.letters[this.state.currentRound-1]:"",callbackWhenAnimationDone:this.callbackWhenAnimationDone}),t=this.state,n=t.allPlayers,a=t.currentPhase,i=t.gameConfig,s=t.showLetterAnimation,o=t.showLoadingScreen,c=Object(u.jsx)(z,{allPlayers:n,kickPlayer:this.sendKickPlayerMessage}),l=a===W.f.fillOutTextfields&&i&&i.endRoundMode===Re.a.allPlayersSubmit&&this.state.playersThatFinishedRound.size!==n.size?Object(u.jsx)(q.a,{waitingForPlayers:this.getWaitingForPlayers()}):Object(u.jsx)(q.a,{});return Object(u.jsxs)(g.a.Fragment,{children:[Object(u.jsxs)(b.a,{client:this.pubNubClient,children:[Object(u.jsx)($e,{gameChannel:this.props.gameId,gameConfig:this.props.gameConfig,isRejoiningGame:this.props.isRejoiningGame,playerInfo:this.props.playerInfo,navigateToJoinGamePage:this.navigateToJoinGamePage,addPlayers:this.addPlayers,processPubNubMessage:this.processPubNubMessage}),this.props.playerInfo.isAdmin&&n.size>1?c:null,s?e:null,o?l:null,o||s?null:Object(u.jsx)("div",{className:"main-content-wrapper",children:this.createCurrentPhaseElement()})]}),Object(u.jsx)(j.b,{message:this.state.a11yMessagePolite,"aria-live":"polite",clearOnUnmount:"true"})]})}},{key:"componentDidMount",value:function(){var e=this.props,t=e.gameConfig,n=e.gameId,r=e.isRejoiningGame,i=e.playerInfo;if(null!==n&&null!==i)if(r)this.sendPubNubMessage({type:a.requestGameData});else{var s=new Map;s.set(i.id,i),i.isAdmin?(Object(it.i)(t),this.setState({a11yMessagePolite:"Du hast das Spiel erfolgreich erstellt. Teile die Spiel-ID beziehungsweise den Link zum Spiel, damit Mitspieler beitreten k\xf6nnen.",allPlayers:s,gameConfig:t,showLoadingScreen:!1})):this.setState({allPlayers:s})}else this.props.history.push("/")}}]),n}(m.Component);t.default=Object(y.b)(h.c,Object(v.b)((function(e){return{gameConfig:e.gameConfig,gameId:e.gameId,isRejoiningGame:e.isRejoiningGame,playerInfo:e.playerInfo}}),(function(e){return{onSetDataOfFinishedGame:function(t){return e(Object(rt.l)(t))},onResetAppState:function(t){return e(Object(rt.i)(t))}}})))(pt)}}]);
//# sourceMappingURL=9.739a4289.chunk.js.map