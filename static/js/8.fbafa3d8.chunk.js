(this["webpackJsonpstadt-land-fluss"]=this["webpackJsonpstadt-land-fluss"]||[]).push([[8],{161:function(e,t,n){"use strict";n.d(t,"l",(function(){return u})),n.d(t,"k",(function(){return m})),n.d(t,"j",(function(){return d})),n.d(t,"g",(function(){return p})),n.d(t,"n",(function(){return f})),n.d(t,"e",(function(){return h})),n.d(t,"d",(function(){return g})),n.d(t,"c",(function(){return b})),n.d(t,"h",(function(){return v})),n.d(t,"i",(function(){return y})),n.d(t,"m",(function(){return w})),n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return _})),n.d(t,"f",(function(){return k}));var a=n(22),r=n(162),o=n(169),i=n(180),l=n.n(i),c=n(63),s=n(43),u=function(e,t){if(e>t.length)throw new Error("Cannot create more randomn unique letters than the number of possibleLetters provided!");for(var n=[],a=Object(r.a)(t),o=function(e){var t=l()(a);n.push(t),a=a.filter((function(e){return e!==t}))},i=0;i<e;i++)o();return n},m=function(e,t,n){for(var a=Object(r.a)(n),o=e-n.length,i=t.filter((function(e){return!n.includes(e)})),c=function(e){var t=l()(i);a.push(t),i=i.filter((function(e){return e!==t}))},s=0;s<o;s++)c();return a},d=function(e){return Array.from(e).map((function(e){return e[1]})).sort((function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0}))},p=function(e){return Object(s.e)(e,{points:c.s,star:!1,text:"",valid:!0})},f=function(e){return e.map((function(e){return Object(a.a)({},e,{text:e.text.trim(),valid:!!e.text})}))},h=function(e,t){var n=new Map;return e.forEach((function(a){var r=[];t.forEach((function(t){var n=new Map;e.forEach((function(e){n.set(e.id,!0)})),r.push(n)})),n.set(a.id,r)})),n},g=function(e,t){if(e.checkForDuplicates||e.onlyPlayerWithValidAnswer)for(var n=t.keys().next().value,a=t.get(n),r=0;r<a.length;r++)b(e,t,r)},b=function(e,t,n){(e.checkForDuplicates||e.onlyPlayerWithValidAnswer)&&Array.from(t.keys()).forEach((function(a){var r=t.get(a);r[n].valid&&(e.onlyPlayerWithValidAnswer&&C(a,t,n)?r[n].points=c.n:e.checkForDuplicates&&E(a,t,n)?r[n].points=c.o:r[n].points=c.s)}))},C=function(e,t,n){var a=Array.from(t.keys()).filter((function(t){return t!==e})),r=!0;return a.forEach((function(e){return r=r&&!t.get(e)[n].valid})),r},E=function(e,t,n){var a=Array.from(t.keys()).filter((function(t){return t!==e})),r=t.get(e)[n].text.toLowerCase().replace(/[^0-9a-z]/gi,"");return Object(o.some)(a,(function(e){var a=t.get(e)[n];return a.valid&&r===a.text.toLowerCase().replace(/[^0-9a-z]/gi,"")}))},v=function(e){return e<=3?1:2},y=function(e){var t=0;return e.forEach((function(e){return t=e?t:t+1})),t},w=function(e,t){var n=new Map;return e.forEach((function(e,a){if(!e){var r=t.get(a);r&&n.set(a,r)}})),d(n)},O=function(e,t){t.forEach((function(t){t.forEach((function(t){t.valid?e.creativeAnswersExtraPoints&&t.star&&(t.points=t.points+c.d):t.points=0}))}))},_=function(e,t){var n=[],a={};return e.forEach((function(e,t){return a[t]={playerName:e.name,points:0}})),t.forEach((function(e){e.forEach((function(e,t){var n=e.reduce((function(e,t){return e+t.points}),0);a[t].points+=n}))})),Object.keys(a).forEach((function(e){return n.push(a[e])})),n.sort((function(e,t){return t.points-e.points}))},k=function(e,t,n){var a=[];return n.forEach((function(n){n.forEach((function(n,r){var o=e.get(r);n.forEach((function(e,n){e.valid&&e.star&&a.push({category:t.categories[n],playerName:o.name,text:e.text})}))}))})),a}},163:function(e,t,n){"use strict";var a=n(186),r=n(67),o=n.n(r),i=n(0),l=n.n(i),c=n(164),s=n.n(c);t.a=function(e){return l.a.createElement("div",{className:s.a.button_wrapper},l.a.createElement(a.a,{type:"button",color:"default",variant:"contained",size:"large",startIcon:l.a.createElement(o.a,null),onClick:e.onReturnToDashboard},"Dashboard"))}},164:function(e,t,n){e.exports={button_wrapper:"ToDashboardButton_button_wrapper__1EtAB"}},177:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return u}));var a,r=n(151),o=n(0),i=n.n(o),l=n(26),c=n(178),s=n.n(c);!function(e){e.newgame="newgame",e.joingame="joingame"}(a||(a={}));var u=function(e){var t="newgame"===e.context?"ein neues Spiel erstellst":"einem anderen Spiel beitrittst",n="Du nimmst bereits an einem laufenden Spiel teil. Wenn du ".concat(t,",\n    kannst du nicht mehr in das alte Spiel zur\xfcckkehren!");return i.a.createElement("div",{className:"material-card-style"},i.a.createElement("p",{className:s.a.hint_text},i.a.createElement("span",{className:"rejoin-running-game-hint-highlighted"},"Achtung: "),n),i.a.createElement(r.a,{component:l.b,to:"/play",className:s.a.link},"\u21d2 Zur\xfcck ins laufende Spiel"))}},178:function(e,t,n){e.exports={hint_text:"RejoinRunningGameHint_hint_text__24Gb_",link:"RejoinRunningGameHint_link__2heEh"}},205:function(e,t,n){e.exports={less_padding:"AddCustomCategory_less_padding__t9AWk",dialog_min_width:"AddCustomCategory_dialog_min_width__3OgRe"}},208:function(e,t,n){e.exports={options_label:"NewGameOptionsPanel_options_label__21M5o",radio_group:"NewGameOptionsPanel_radio_group__1oZ38",countdown_input:"NewGameOptionsPanel_countdown_input__kNFVz"}},210:function(e,t,n){e.exports={random_categories_button:"SelectRandomCategories_random_categories_button__888IJ",dialog_title:"SelectRandomCategories_dialog_title__2q4PR",dialog_min_width:"SelectRandomCategories_dialog_min_width__2rUfu"}},212:function(e,t,n){e.exports={options_label:"NewGame_options_label__1i8NK"}},285:function(e,t,n){"use strict";n.r(t);var a,r=n(70),o=n(22),i=n(162),l=n(32),c=n(33),s=n(35),u=n(36),m=n(283),d=n(186),p=n(236),f=n(213),h=n.n(f),g=n(169),b=n(0),C=n.n(b),E=n(20),v=n(159),y=n(165),w=n(289),O=n(261),_=n(262),k=n(263),x=n(147),j=n(173),S=n.n(j),I=n(205),N=n.n(I),A=function(e){var t=e.onClose,n=e.open,a=Object(b.useState)(""),r=Object(y.a)(a,2),o=r[0],i=r[1],l=Object(b.useState)(!1),c=Object(y.a)(l,2),s=c[0],u=c[1],p=function(){t(null)};return C.a.createElement(w.a,{onClose:p,open:n},C.a.createElement("form",{onSubmit:function(e){e.preventDefault(),e.stopPropagation();var n=o.trim();""!==n?(i(""),u(!1),t(n)):(i(""),u(!0))},className:N.a.dialog_min_width,noValidate:!0,autoComplete:"off"},C.a.createElement(O.a,null,C.a.createElement(_.a,null,"Kategorie hinzuf\xfcgen"),C.a.createElement(m.a,{id:"new-category-input",autoFocus:!0,margin:"dense",fullWidth:!0,required:!0,value:o,error:s&&!o,onChange:function(e){return i(e.target.value)}})),C.a.createElement(k.a,null,C.a.createElement(d.a,{type:"button",onClick:p},"Abbrechen"),C.a.createElement(d.a,{type:"submit",color:"primary"},"Hinzuf\xfcgen"))))},R=function(e){var t=Object(b.useState)(!1),n=Object(y.a)(t,2),a=n[0],r=n[1];return C.a.createElement(C.a.Fragment,null,C.a.createElement(x.a,{className:N.a.less_padding,title:"Kategorie hinzuf\xfcgen","aria-label":"Kategorie hinzuf\xfcgen",onClick:function(){return r(!0)}},C.a.createElement(S.a,null)),C.a.createElement(A,{open:a,onClose:function(t){r(!1),t&&e.addCustomCategory(t)}}))},T=n(294),D=n(117),P=n(293),z=n(207),G=n.n(z),W=n(206),F=n.n(W);!function(e){e.available="available",e.selected="selected"}(a||(a={}));var B,V=Object(D.a)((function(e){return Object(P.a)({root:{display:"flex",justifyContent:"center",flexWrap:"wrap",padding:e.spacing(.5)}})})),K=function(e){var t=V();return C.a.createElement("div",{className:t.root},e.chipsArray.map((function(t,n){return C.a.createElement(T.a,{key:"chip-to-".concat(e.chipType,"-").concat(n),color:"selected"===e.chipType?"primary":void 0,icon:"selected"===e.chipType?C.a.createElement(F.a,{className:"chip-icon-no-bg"}):C.a.createElement(G.a,null),label:t,className:"slf-chip-array-item",onClick:function(){return e.removeChip(t)}})})),e.children)},L=n(290),q=n(264),M=n(265),U=n(266),H=n(267),J=n(288),Z=n(119),Q=n(259),X=n(260),Y=n(268),$=n(287),ee=n(258),te=n(209),ne=n.n(te),ae=n(63);!function(e){e.checkForDuplicates="checkForDuplicates",e.creativeAnswersExtraPoints="creativeAnswersExtraPoints",e.onlyPlayerWithValidAnswer="onlyPlayerWithValidAnswer"}(B||(B={}));var re,oe=n(208),ie=n.n(oe),le=function(e){return C.a.createElement(L.a,{className:"new-game-expansion-panel"},C.a.createElement(q.a,{expandIcon:C.a.createElement(ne.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},"Weitere Optionen"),C.a.createElement(M.a,null,C.a.createElement(U.a,{className:"game-options-list"},C.a.createElement(H.a,{control:C.a.createElement(J.a,{checked:e.scoringOptions.checkForDuplicates,name:B.checkForDuplicates,color:"primary",onChange:e.handleGameOptionChange}),label:ae.e.checkForDuplicates}),C.a.createElement(H.a,{control:C.a.createElement(J.a,{checked:e.scoringOptions.onlyPlayerWithValidAnswer,name:B.onlyPlayerWithValidAnswer,color:"primary",onChange:e.handleGameOptionChange}),label:ae.e.onlyPlayerWithValidAnswer}),C.a.createElement(H.a,{control:C.a.createElement(J.a,{checked:e.scoringOptions.creativeAnswersExtraPoints,name:B.creativeAnswersExtraPoints,color:"primary",onChange:e.handleGameOptionChange}),label:ae.e.creativeAnswersExtraPoints})),C.a.createElement(Z.a,null),C.a.createElement(Q.a,{component:"fieldset"},C.a.createElement(X.a,{component:"legend",className:ie.a.options_label},"Beenden der Runde durch:"),C.a.createElement(Y.a,{className:ie.a.radio_group,"aria-label":"Beenden der Runde",name:"usecountdown",value:e.useCountdown?ae.t.countdown:ae.t.player,onChange:e.handleUseCountdownChange},C.a.createElement(H.a,{value:ae.t.player,control:C.a.createElement($.a,{color:"primary"}),label:"Spieler"}),C.a.createElement(H.a,{value:ae.t.countdown,control:C.a.createElement($.a,{color:"primary"}),label:"Countdown (in Sekunden)"}),C.a.createElement(ee.a,{type:"number",value:e.durationOfCountdown,className:ie.a.countdown_input,disabled:!e.useCountdown,inputProps:{"aria-label":"Dauer des Countdowns",min:ae.j},onChange:e.handleCountdownInputChange}))),C.a.createElement(Z.a,null),C.a.createElement("p",{className:ie.a.options_label},"Folgende Buchstaben ausschlie\xdfen:"),C.a.createElement(U.a,{row:!0,className:"letters-to-exclude"},ae.p.map((function(t,n){return C.a.createElement(H.a,{key:"slf-letters-to-exclude-".concat(n),control:C.a.createElement(J.a,{checked:e.lettersToExclude.includes(t),color:"primary",onChange:function(n){return e.handleLetterToExcludeChange(n,t)}}),label:t})})))))},ce=n(177),se=n(64),ue=n(211),me=n.n(ue),de=n(210),pe=n.n(de),fe=Object(D.a)((function(e){return{label:{fontSize:"0.85rem"}}})),he=function(e){var t=fe(),n=e.onClose,a=e.open,r=Object(b.useState)(ae.k),o=Object(y.a)(r,2),i=o[0],l=o[1],c=Object(b.useState)(!1),s=Object(y.a)(c,2),u=s[0],p=s[1],f="Anzahl Kategorien (".concat(ae.k,"-").concat(e.maxNumberOfCategories,")"),h=function(){n(null)};return C.a.createElement(w.a,{onClose:h,open:a},C.a.createElement("form",{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),n(i,u)},className:pe.a.dialog_min_width,noValidate:!0,autoComplete:"off"},C.a.createElement(O.a,null,C.a.createElement(_.a,{className:pe.a.dialog_title},"Kategorien zuf\xe4llig ausw\xe4hlen"),C.a.createElement(m.a,{name:"numberOfRoundsInput",label:f,type:"number",value:i,variant:"outlined",fullWidth:!0,required:!0,inputProps:{min:ae.k,max:e.maxNumberOfCategories},onChange:function(t){var n=+t.target.value;n>=ae.k&&n<=e.maxNumberOfCategories&&l(n)}}),C.a.createElement(H.a,{classes:t,control:C.a.createElement(J.a,{checked:u,name:"retainSelection",color:"primary",onChange:function(e){p(e.target.checked)}}),label:"Inklusive bereits ausgew\xe4hlter Kategorien"})),C.a.createElement(k.a,null,C.a.createElement(d.a,{type:"button",onClick:h},"Abbrechen"),C.a.createElement(d.a,{type:"submit",color:"primary"},"Ausw\xe4hlen"))))},ge=function(e){var t=Object(b.useState)(!1),n=Object(y.a)(t,2),a=n[0],r=n[1];return C.a.createElement(C.a.Fragment,null,C.a.createElement(x.a,{className:pe.a.random_categories_button,size:"small",title:"Kategorien zuf\xe4llig ausw\xe4hlen","aria-label":"Kategorien zuf\xe4llig ausw\xe4hlen",onClick:function(){return r(!0)}},C.a.createElement(me.a,{fontSize:"small"})),C.a.createElement(he,{maxNumberOfCategories:e.maxNumberOfCategories,open:a,onClose:function(t,n){r(!1),t&&void 0!==n&&e.selectCategoriesRandomly(t,n)}}))},be=n(163),Ce=n(13),Ee=n(161),ve=n(43),ye=n(23),we=n(212),Oe=n.n(we);!function(e){e.available="available",e.selected="selected"}(re||(re={}));var _e=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={availableCategories:ae.a,durationOfCountdown:ae.b,isSnackbarOpen:!1,lettersToExclude:Object(i.a)(ae.r),nameInput:e.props.playerInfo?e.props.playerInfo.name:"",numberOfRoundsInput:ae.c,selectedCategories:ae.q,scoringOptions:{checkForDuplicates:!0,creativeAnswersExtraPoints:!1,onlyPlayerWithValidAnswer:!0},snackBarMessage:"",useCountdown:!1,validateInputs:!1},e.handleNameInputChange=function(t){e.setState({nameInput:t.target.value})},e.handleNumberOfRoundsInputChange=function(t){var n=+t.target.value;n>=ae.m&&n<=ae.i&&e.setState({numberOfRoundsInput:n})},e.handleGameOptionChange=function(t){e.setState({scoringOptions:Object(o.a)({},e.state.scoringOptions,Object(r.a)({},t.target.name,t.target.checked))})},e.handleCountdownInputChange=function(t){e.setState({durationOfCountdown:+t.target.value})},e.handleLetterToExcludeChange=function(t,n){var a=e.state.lettersToExclude,r=t.target.checked?[].concat(Object(i.a)(a),[n]):a.filter((function(e){return e!==n}));e.setState({lettersToExclude:r})},e.handleUseCountdownChange=function(t){e.setState({useCountdown:t.target.value===ae.t.countdown})},e.selectCategoriesRandomly=function(t,n){var a=[].concat(Object(i.a)(e.state.availableCategories),Object(i.a)(e.state.selectedCategories)),r=Object(Ee.k)(t,a,n?e.state.selectedCategories:[]),o=a.filter((function(e){return!r.includes(e)})).sort();e.setState({availableCategories:o,selectedCategories:r})},e.updateCategoryArrays=function(t,n){var a,r;n===re.selected?(a=e.state.selectedCategories.filter((function(e){return e!==t})),(r=Object(i.a)(e.state.availableCategories)).push(t)):(r=e.state.availableCategories.filter((function(e){return e!==t})),(a=Object(i.a)(e.state.selectedCategories)).push(t)),e.setState({availableCategories:r,selectedCategories:a})},e.addCustomCategory=function(t){e.setState({availableCategories:[].concat(Object(i.a)(e.state.availableCategories),[t])})},e.handleSubmit=function(t){t.preventDefault(),e.isReadyToStartGame()?e.startNewGame():e.setState({nameInput:e.state.nameInput.trim(),validateInputs:!0})},e.isReadyToStartGame=function(){return e.state.selectedCategories.length<ae.k?(e.showSnackBar("Du musst mindestens ".concat(ae.k," Kategorien ausw\xe4hlen!")),!1):ae.p.length-e.state.lettersToExclude.length<e.state.numberOfRoundsInput?(e.showSnackBar("Du hast zu viele Buchstaben ausgeschlossen!"),!1):!!e.state.nameInput.trim()},e.showSnackBar=function(t){return e.setState({isSnackbarOpen:!0,snackBarMessage:t})},e.handleSnackBarClose=function(){return e.setState({isSnackbarOpen:!1})},e.startNewGame=function(){var t=e.props.playerInfo,n=e.props.playerIdCreationTimestamp,a=e.state,r=a.durationOfCountdown,o=a.nameInput,i=a.numberOfRoundsInput,l=a.scoringOptions,c=a.selectedCategories,s=a.useCountdown,u=Object(v.a)();Object(ye.f)(),Object(ye.h)({id:t.id,idCreationTimestamp:n,name:o.trim()}),Object(ye.j)({gameId:u,idCreationTimestamp:Object(ve.b)(new Date),isPlayerAdmin:!0}),e.props.onSetGameData({gameConfig:{categories:c,durationOfCountdown:r,letters:Object(Ee.l)(i,Object(g.xor)(ae.p,e.state.lettersToExclude)),numberOfRounds:i,scoringOptions:l,useCountdown:s},gameId:u,isRejoiningGame:!1,playerInfo:{id:t.id,isAdmin:!0,name:o.trim()}}),e.props.history.push("/play")},e.returnToDashboard=function(){e.props.history.push("/")},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this,t="Anzahl Runden (".concat(ae.m,"-").concat(ae.i,")"),n=this.state.availableCategories.length+this.state.selectedCategories.length,r=C.a.createElement("form",{onSubmit:this.handleSubmit,className:"app-form",noValidate:!0,autoComplete:"off"},C.a.createElement(m.a,{name:"nameInput",label:"Spielername (max. 20 Zeichen)",value:this.state.nameInput,className:"app-form-input",variant:"outlined",fullWidth:!0,required:!0,autoFocus:!0,error:this.state.validateInputs&&!this.state.nameInput,inputProps:{maxLength:"20"},onChange:this.handleNameInputChange}),C.a.createElement(m.a,{name:"numberOfRoundsInput",label:t,type:"number",value:this.state.numberOfRoundsInput,variant:"outlined",fullWidth:!0,required:!0,inputProps:{min:ae.m,max:ae.i},onChange:this.handleNumberOfRoundsInputChange}),C.a.createElement(le,{durationOfCountdown:this.state.durationOfCountdown,lettersToExclude:this.state.lettersToExclude,scoringOptions:this.state.scoringOptions,useCountdown:this.state.useCountdown,handleCountdownInputChange:this.handleCountdownInputChange,handleGameOptionChange:this.handleGameOptionChange,handleLetterToExcludeChange:this.handleLetterToExcludeChange,handleUseCountdownChange:this.handleUseCountdownChange}),C.a.createElement("p",{className:Oe.a.options_label},C.a.createElement("span",null,"Ausgew\xe4hlte Kategorien (mind. ",ae.k,"):"),C.a.createElement(ge,{maxNumberOfCategories:n,selectCategoriesRandomly:this.selectCategoriesRandomly})),C.a.createElement(K,{chipsArray:this.state.selectedCategories,chipType:a.selected,removeChip:function(t){return e.updateCategoryArrays(t,re.selected)}}),C.a.createElement("p",{className:Oe.a.options_label},"Verf\xfcgbare Kategorien:"),C.a.createElement(K,{chipsArray:this.state.availableCategories,chipType:a.available,removeChip:function(t){return e.updateCategoryArrays(t,re.available)}},C.a.createElement(R,{addCustomCategory:this.addCustomCategory})),C.a.createElement("div",{className:"button-wrapper add-margin-top"},C.a.createElement(d.a,{type:"submit",color:"primary",variant:"contained",size:"large",startIcon:C.a.createElement(h.a,null)},"Spiel erstellen")));return C.a.createElement("div",{className:"main-content-wrapper"},this.props.gameId?C.a.createElement(ce.a,{context:ce.b.newgame}):null,C.a.createElement("div",{className:"material-card-style"},C.a.createElement(se.a,{showDivider:!0,text:"Neues Spiel"}),r),C.a.createElement(be.a,{onReturnToDashboard:this.returnToDashboard}),C.a.createElement(p.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:this.state.isSnackbarOpen,autoHideDuration:3e3,message:this.state.snackBarMessage,onClose:this.handleSnackBarClose}))}},{key:"componentDidUpdate",value:function(e){this.props.playerInfo&&this.props.playerInfo!==e.playerInfo&&this.setState({nameInput:this.props.playerInfo.name})}}]),n}(b.Component);t.default=Object(E.b)((function(e){return{gameId:e.gameId,playerIdCreationTimestamp:e.playerIdCreationTimestamp,playerInfo:e.playerInfo}}),(function(e){return{onSetGameData:function(t){return e(Object(Ce.i)(t))}}}))(_e)}}]);
//# sourceMappingURL=8.fbafa3d8.chunk.js.map