(this["webpackJsonpstadt-land-fluss"]=this["webpackJsonpstadt-land-fluss"]||[]).push([[0],{104:function(e){e.exports=JSON.parse('{"name":"stadt-land-fluss","version":"1.3.2","homepage":"https://alexlehner86.github.io/stadt-land-fluss","private":true,"dependencies":{"@material-ui/core":"^4.9.8","@material-ui/icons":"^4.9.1","@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.5.0","@testing-library/user-event":"^7.2.1","@types/jest":"^24.9.1","@types/node":"^12.12.30","@types/react":"^16.9.25","@types/react-dom":"^16.9.5","backspace-disabler":"^1.1.3","lodash":"^4.17.15","pubnub":"^4.27.4","pubnub-react":"^2.0.0","random-item":"^3.0.0","react":"^16.13.1","react-dom":"^16.13.1","react-redux":"^7.2.0","react-router":"^5.1.2","react-router-dom":"^5.1.2","react-scripts":"3.4.1","redux":"^4.0.5","typescript":"^3.7.5","uuid":"^7.0.2"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","predeploy":"npm run build","deploy":"gh-pages -d build"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"@types/lodash":"^4.14.149","@types/pubnub":"^4.27.2","@types/react-redux":"^7.1.7","@types/react-router-dom":"^5.1.3","@types/uuid":"^7.0.2","gh-pages":"^2.2.0"}}')},136:function(e,t,a){e.exports=a(164)},137:function(e,t,a){},142:function(e,t,a){},147:function(e,t,a){},148:function(e,t,a){},149:function(e,t,a){},152:function(e,t,a){},154:function(e,t,a){},155:function(e,t,a){},156:function(e,t,a){},158:function(e,t,a){},159:function(e,t,a){},160:function(e,t,a){},161:function(e,t,a){},162:function(e){e.exports=JSON.parse('{"publishKey":"pub-c-cea13e04-e3aa-434b-806f-fc890fbd45bf","subscribeKey":"sub-c-66cfccd4-6c89-11ea-a7c4-5e95b827fd71"}')},164:function(e,t,a){"use strict";a.r(t),a.d(t,"appStore",(function(){return Oa}));a(137);var n,r=a(0),i=a.n(r),o=a(9),s=a.n(o),l=a(60),c=a(12),u=a(13),m=a(23),p=a(24),d=(a(142),a(216)),h=a(19),f=a(39),g=a(40),y=a(221),b=(a(147),a(196)),v=a(128),E=a(203),I=a(96),C=a.n(I),w=a(97),O=a.n(w),S=a(98),k=a.n(S),R=a(99),P=a.n(R),N=a(78),j=a.n(N),T=a(100),A=a.n(T),x=a(101),F=a.n(x),D=a(102),M=a.n(D),G=a(103),L=a.n(G),_=a(127);!function(e){e.green="green",e.blue="blue",e.orange="orange",e.pink="pink",e.black="black"}(n||(n={}));var z,W=[{id:n.green,animationBackgroundColor:"rgb(31, 121, 52)",className:"green-theme",displayName:"Gr\xfcn/Wald",muiTheme:Object(_.a)({palette:{primary:C.a,secondary:O.a}}),style:{background:"linear-gradient(rgba(60, 143, 80, 0.3), rgba(60, 143, 80, 0.3)),\n                url('".concat("/stadt-land-fluss","/assets/leaves-pattern.jpg')")}},{id:n.blue,animationBackgroundColor:"rgb(9, 100, 204)",className:"blue-theme",displayName:"Blau/Meer",muiTheme:Object(_.a)({palette:{primary:k.a,secondary:P.a}}),style:{background:"linear-gradient(rgba(255, 255, 255, 0.3), rgba(255, 255, 255, 0.3)),\n                url('".concat("/stadt-land-fluss","/assets/sea-pattern.jpg')")}},{id:n.orange,animationBackgroundColor:"rgb(187, 138, 5)",className:"orange-theme",displayName:"Orange/Strand",muiTheme:Object(_.a)({palette:{primary:j.a,secondary:A.a}}),style:{background:"linear-gradient(rgba(241, 179, 8, 0.3), rgba(240, 188, 47, 0.3)),\n                url('".concat("/stadt-land-fluss","/assets/beach-pattern.jpg')")}},{id:n.pink,animationBackgroundColor:"rgb(167, 34, 207)",className:"pink-theme",displayName:"Pink/Musik",muiTheme:Object(_.a)({palette:{primary:F.a,secondary:M.a}}),style:{background:"linear-gradient(rgba(133, 14, 103, 0.3), rgba(133, 14, 103, 0.3)),\n                url('".concat("/stadt-land-fluss","/assets/music-pattern.jpg')")}},{id:n.black,animationBackgroundColor:"rgb(0, 0, 0)",className:"black-theme",displayName:"Schwarz/Goth",muiTheme:Object(_.a)({palette:{primary:L.a,secondary:j.a}}),style:{background:"linear-gradient(rgba(0, 51, 153, 0.1), rgba(0, 51, 153, 0.1)),\n                url('".concat("/stadt-land-fluss","/assets/halloween-pattern.jpg')")}}],B=a(104),K=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={anchorEl:null,version:""},e.handleClick=function(t){e.setState({anchorEl:t.currentTarget})},e.handleClose=function(){e.setState({anchorEl:null})},e.handleMenuItemClick=function(t){e.setState({anchorEl:null}),e.props.switchTheme(t)},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=i.a.createElement("p",null,"Spieler: ",this.props.playerName?this.props.playerName:"-");return i.a.createElement("header",{className:"app-header "+this.props.theme.className},i.a.createElement("h1",null,"Stadt-Land-Fluss"),t,i.a.createElement("div",{className:"about-section"},i.a.createElement("p",null,"v",this.state.version),i.a.createElement("a",{href:"https://github.com/alexlehner86",target:"_blank",rel:"noopener noreferrer","aria-label":"Mehr \xfcber den Autor erfahren (\xf6ffnet neues Fenster)"},"Autor")),i.a.createElement(b.a,{className:"color-picker-button","aria-controls":"color-picker-menu","aria-haspopup":"true",onClick:this.handleClick},"Theme"),i.a.createElement(v.a,{id:"color-picker-menu",anchorEl:this.state.anchorEl,keepMounted:!0,open:Boolean(this.state.anchorEl),onClose:this.handleClose},W.map((function(t,a){return i.a.createElement(E.a,{key:"color-picker-menu-item-"+a,onClick:function(){return e.handleMenuItemClick(t)}},t.displayName)}))))}},{key:"componentDidMount",value:function(){this.setState({version:B.version})}}]),a}(r.Component),U=Object(h.b)((function(e){return{playerName:e.playerInfo?e.playerInfo.name:""}}))(K),q=(a(148),a(205)),H=(a(149),a(204)),V=function(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement("h2",{className:"section-header"},e.text),e.showDivider?i.a.createElement(H.a,null):null)},J=a(106),Z=a.n(J),Y=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=i.a.createElement(q.a,{component:f.b,to:"/play",className:"rejoin-game-link"},i.a.createElement(Z.a,null),"Zur\xfcck ins laufende Spiel");return i.a.createElement("div",{className:"main-content-wrapper"},i.a.createElement("div",{className:"dashboard-container material-card-style"},i.a.createElement(V,{showDivider:!0,text:"Dashboard"}),i.a.createElement("div",{className:"link-container"},this.props.gameId?e:null,i.a.createElement(q.a,{component:f.b,to:"/newgame"},"Neues Spiel"),i.a.createElement(q.a,{component:f.b,to:"/joingame"},"Spiel beitreten")),i.a.createElement("img",{src:"".concat("/stadt-land-fluss","/assets/city-country-river.jpg"),alt:"Stadt, Land, Fluss",className:"dashboard-slf-image"}),i.a.createElement("div",{className:"img-copyright"},i.a.createElement("h3",null,"Credits/Bilder"),i.a.createElement("a",{href:"https://www.vecteezy.com/vector-art/830131-river-city-landscape-with-buildings-hills-and-trees",target:"_blank",rel:"noopener noreferrer"},"Homepage/Stadt-Land-Fluss by pikgura \u2013 www.vecteezy.com"),i.a.createElement("a",{href:"https://www.vecteezy.com/vector-art/276920-abstract-seamless-pattern-with-tropical-leaves",target:"_blank",rel:"noopener noreferrer"},"Theme Gr\xfcn/Wald by NadiaGrapes \u2013 www.vecteezy.com"),i.a.createElement("a",{href:"https://www.freepik.com/free-photos-vectors/background",target:"_blank",rel:"noopener noreferrer"},"Theme Blau/Meer by macrovector \u2013 www.freepik.com"),i.a.createElement("a",{href:"https://www.vecteezy.com/vector-art/460735-seashell-sand-seamless-pattern",target:"_blank",rel:"noopener noreferrer"},"Theme Orange/Strand by Macrovector \u2013 www.vecteezy.com"),i.a.createElement("a",{href:"https://www.vecteezy.com/vector-art/454258-music-seamless",target:"_blank",rel:"noopener noreferrer"},"Theme Pink/Musik by Macrovector \u2013 www.vecteezy.com"),i.a.createElement("a",{href:"https://www.vecteezy.com/vector-art/662038-cat-and-bat-pattern",target:"_blank",rel:"noopener noreferrer"},"Theme Schwarz/Goth by angyee \u2013 www.vecteezy.com"))))}}]),a}(r.Component),$=Object(h.b)((function(e){return{gameId:e.gameId}}))(Y),Q=a(20),X=a(202),ee=a(165),te=a(206),ae=a(207),ne=a(70),re=a.n(ne),ie=a(109),oe=a.n(ie),se=(a(152),a(107)),le=a.n(se),ce=function(e){return i.a.createElement("div",{className:"button-wrapper to-dashboard-button"},i.a.createElement(b.a,{type:"button",color:"default",variant:"contained",size:"large",startIcon:i.a.createElement(le.a,null),onClick:e.onReturnToDashboard},"Dashboard"))},ue=function(e){return{type:"SET_DATA_FOR_NEW_GAME",payload:e}},me=a(27),pe=a(26),de=a(108),he=a.n(de),fe=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","R","S","T","U","V","W","Z"],ge=["Stadt","Land","Fluss/Gew\xe4sser"],ye=["Band/Musiker","Berg/Gebirge","Beruf","Ber\xfchmte Person","Buchtitel","Chemisches Element","Dinge die man jeden Tag macht","Etwas Eckiges","Etwas Rundes","Fiktiver Charakter","Film/Serie","Getr\xe4nk","Grund f\xfcr eine Versp\xe4tung","Hobby","In Zeiten von Corona verboten","K\xf6nnte ein Trump-Tweet sein","K\xf6rperteil","Krankheit","Laster","Marke","Mordwaffe","Pflanze","Pizzasorte","Porno-K\xfcnstlername","Religion","Scheidungsgrund","Schimpfwort","See/Meer","Sehensw\xfcrdigkeit","Sex (Stellung, Synonym)","Speise","Tier","Title of your Sex Tape","Unn\xf6tige Superkraft","Videospiel","Werkzeug","Wort in einer Fremdsprache"];!function(e){e.waitingToStart="waitingToStart",e.fillOutTextfields="fillOutTextfields",e.evaluateRound="evaluateRound",e.gameResult="gameResult"}(z||(z={}));var be,ve=function(e){return e.getTime()/1e3|0},Ee=function(e){var t=new Map;return Object.keys(e).forEach((function(a){return t.set(a,e[a])})),t},Ie=function(e){var t={};return e.forEach((function(e,a){return t[a]=e})),t},Ce=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fe;if(e>t.length)throw new Error("Cannot create more randomn unique letters than the number of possibleLetters provided!");for(var a=[],n=Object(Q.a)(t),r=function(e){var t=he()(n);a.push(t),n=n.filter((function(e){return e!==t}))},i=0;i<e;i++)r(i);return a},we=function(e){return Array.from(e).map((function(e){return e[1]})).sort((function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0}))},Oe=function(e){return t={text:"",valid:!0},new Array(e).fill(t);var t},Se=function(e){return e.map((function(e){return Object(me.a)({},e,{valid:!!e.text})}))},ke=function(e,t){var a=new Map;return e.forEach((function(n){var r=[];t.forEach((function(t){var a=new Map;e.forEach((function(e){a.set(e.id,!0)})),r.push(a)})),a.set(n.id,r)})),a},Re=function(e){return e<=3?1:2},Pe=function(e){var t=0;return e.forEach((function(e){return t=e?t:t+1})),t},Ne=function(e,t,a){var n=Object(pe.cloneDeep)(e);return n.forEach((function(e,n){for(var r=t.get(n),i=0;i<e.length;i++)e[i].valid&&(e[i].valid=Pe(r[i])<a)})),n},je=function(e,t){var a=[],n={};return e.forEach((function(e,t){return n[t]={playerName:e.name,points:0}})),t.forEach((function(e){e.forEach((function(e,t){var a=e.reduce((function(e,t){return t.valid?e+1:e}),0);n[t].points+=a}))})),Object.keys(n).forEach((function(e){return a.push(n[e])})),a.sort((function(e,t){return t.points-e.points}))},Te=function(e,t,a){if(e.id===a)return!1;if(e.isAdmin)return!0;var n=t.get(a);if(n&&n.isAdmin){var r=Object(pe.cloneDeep)(t);return r.delete(a),Array.from(r).map((function(e){return e[1]})).sort((function(e,t){return e.id<t.id?-1:e.id>t.id?1:0}))[0].id===e.id}return!1},Ae=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={gameResults:[]},e.getResultIcon=function(e){return e?i.a.createElement(oe.a,{color:"primary",fontSize:"large"}):i.a.createElement(re.a,{fontSize:"large"})},e.returnToDashboard=function(){e.props.history.push("/"),e.props.onResetAppState()},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this;if(null===this.props.gameRounds)return null;var t=this.props.gameConfig,a=Math.max.apply(Math,Object(Q.a)(this.state.gameResults.map((function(e){return e.points}))));return i.a.createElement("div",{className:"main-content-wrapper"},i.a.createElement("div",{className:"material-card-style"},i.a.createElement(V,{showDivider:!0,text:"Ergebnis"}),i.a.createElement(X.a,null,this.state.gameResults.map((function(t,n){return i.a.createElement(ee.a,{key:"results-for-player-"+n},i.a.createElement(te.a,null,e.getResultIcon(t.points===a)),i.a.createElement(ae.a,{primary:t.playerName,secondary:"".concat(t.points," ").concat((r=t.points,o="Punkt",s="Punkte",1===r?o:s))}));var r,o,s})))),i.a.createElement("div",{className:"material-card-style"},i.a.createElement(V,{showDivider:!0,text:"Spiele-Settings"}),i.a.createElement("p",null,"Runden: ",t.numberOfRounds),i.a.createElement("p",null,"Buchstaben: ",t.letters.join(", ")),i.a.createElement("p",null,"Kategorien: ",t.categories.join(", "))),i.a.createElement(ce,{onReturnToDashboard:this.returnToDashboard}))}},{key:"componentDidMount",value:function(){null!==this.props.allPlayers&&null!==this.props.gameRounds?this.setState({gameResults:je(this.props.allPlayers,this.props.gameRounds)}):this.props.history.push("/")}}]),a}(r.Component),xe=Object(h.b)((function(e){return e}),(function(e){return{onResetAppState:function(){return e({type:"RESET_APP_STATE"})}}}))(Ae),Fe=a(69),De=(a(154),a(217)),Me=a(110),Ge=a.n(Me);a(155);!function(e){e.newgame="newgame",e.joingame="joingame"}(be||(be={}));var Le,_e=function(e){var t="newgame"===e.context?"ein neues Spiel erstellst":"einem anderen Spiel beitrittst",a="Du nimmst bereits an einem laufenden Spiel teil. Wenn du ".concat(t,",\n    kannst du nicht mehr in das alte Spiel zur\xfcckkehren!");return i.a.createElement("div",{className:"material-card-style"},i.a.createElement("p",{className:"rejoin-running-game-hint-text"},i.a.createElement("span",{className:"rejoin-running-game-hint-highlighted"},"Achtung: "),a),i.a.createElement(q.a,{component:f.b,to:"/play",className:"bold-text"},"\u21d2 Zur\xfcck ins laufende Spiel"))},ze=function(e){return localStorage.setItem("SLF-APP-THEME",e)},We=function(e){return localStorage.setItem("SLF-PLAYER-INFO",JSON.stringify(e))},Be=function(e){return localStorage.setItem("SLF-RUNNING-GAME-INFO",JSON.stringify(e))},Ke=function(){return localStorage.removeItem("SLF-RUNNING-GAME-INFO")},Ue=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={idInput:"",nameInput:e.props.playerInfo?e.props.playerInfo.name:"",validateInputs:!1},e.handleInputChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(Fe.a)({},n,r))},e.handleSubmit=function(t){t.preventDefault(),e.state.idInput&&e.state.nameInput.trim()?e.joinGame():e.setState({nameInput:e.state.nameInput.trim(),validateInputs:!0})},e.joinGame=function(){var t=e.props.playerInfo,a=e.props.playerIdCreationTimestamp,n=e.state,r=n.idInput,i=n.nameInput;We({id:t.id,idCreationTimestamp:a,name:i.trim()}),Be({gameId:r,idCreationTimestamp:ve(new Date),isPlayerAdmin:!1}),e.props.onSetGameData({gameConfig:null,gameId:r,playerInfo:{id:t.id,isAdmin:!1,isRejoiningGame:!1,name:i.trim()}}),e.props.history.push("/play")},e.returnToDashboard=function(){e.props.history.push("/")},e}return Object(u.a)(a,[{key:"render",value:function(){var e=i.a.createElement("form",{onSubmit:this.handleSubmit,className:"app-form",noValidate:!0,autoComplete:"off"},i.a.createElement(De.a,{name:"nameInput",label:"Spielername",value:this.state.nameInput,onChange:this.handleInputChange,className:"app-form-input",variant:"outlined",fullWidth:!0,required:!0,autoFocus:!0,error:this.state.validateInputs&&!this.state.nameInput}),i.a.createElement(De.a,{name:"idInput",label:"Spiel-ID",value:this.state.idInput,onChange:this.handleInputChange,className:"app-form-input",variant:"outlined",fullWidth:!0,required:!0,error:this.state.validateInputs&&!this.state.idInput}),i.a.createElement("div",{className:"button-wrapper"},i.a.createElement(b.a,{type:"submit",color:"primary",variant:"contained",size:"large",startIcon:i.a.createElement(Ge.a,null)},"Beitreten")));return i.a.createElement("div",{className:"main-content-wrapper"},this.props.gameId?i.a.createElement(_e,{context:be.joingame}):null,i.a.createElement("div",{className:"material-card-style"},i.a.createElement(V,{showDivider:!0,text:"Spiel beitreten"}),e),i.a.createElement(ce,{onReturnToDashboard:this.returnToDashboard}))}},{key:"componentDidMount",value:function(){var e=new URLSearchParams(this.props.location.search);e.has("id")&&this.setState({idInput:e.get("id")})}},{key:"componentDidUpdate",value:function(e){this.props.playerInfo&&this.props.playerInfo!==e.playerInfo&&this.setState({nameInput:this.props.playerInfo.name})}}]),a}(r.Component),qe=Object(h.b)((function(e){return{gameId:e.gameId,playerIdCreationTimestamp:e.playerIdCreationTimestamp,playerInfo:e.playerInfo}}),(function(e){return{onSetGameData:function(t){return e(ue(t))}}}))(Ue),He=(a(156),a(115)),Ve=a.n(He),Je=a(30),Ze=a(219),Ye=a(209),$e=a(210),Qe=a(211),Xe=a(226),et=a(212),tt=a(208),at=a(225),nt=a(112),rt=a.n(nt),it=Object(tt.a)((function(){return Object(at.a)({lessPadding:{padding:"0.375rem 0.5rem"},dialog:{minWidth:"20rem"}})})),ot=function(e){var t=it(),a=e.onClose,n=e.open,o=Object(r.useState)(""),s=Object(Je.a)(o,2),l=s[0],c=s[1],u=Object(r.useState)(!1),m=Object(Je.a)(u,2),p=m[0],d=m[1],h=function(){a(null)};return i.a.createElement(Ze.a,{onClose:h,open:n},i.a.createElement("form",{onSubmit:function(e){e.preventDefault(),e.stopPropagation();var t=l.trim();""!==t?(c(""),d(!1),a(t)):(c(""),d(!0))},className:t.dialog,noValidate:!0,autoComplete:"off"},i.a.createElement(Ye.a,null,i.a.createElement($e.a,null,"Kategorie hinzuf\xfcgen"),i.a.createElement(De.a,{id:"new-category-input",autoFocus:!0,margin:"dense",fullWidth:!0,required:!0,value:l,error:p&&!l,onChange:function(e){return c(e.target.value)}})),i.a.createElement(Qe.a,null,i.a.createElement(b.a,{type:"button",onClick:h},"Abbrechen"),i.a.createElement(b.a,{type:"submit",color:"primary"},"Hinzuf\xfcgen"))))},st=function(e){var t=it(),a=Object(r.useState)(!1),n=Object(Je.a)(a,2),o=n[0],s=n[1];return i.a.createElement(i.a.Fragment,null,i.a.createElement(Xe.a,{title:"Kategorie hinzuf\xfcgen",placement:"right"},i.a.createElement(et.a,{className:t.lessPadding,"aria-label":"Kategorie hinzuf\xfcgen",onClick:function(){return s(!0)}},i.a.createElement(rt.a,null))),i.a.createElement(ot,{open:o,onClose:function(t){return function(t){s(!1),t&&e.addCustomCategory(t)}(t)}}))},lt=a(224),ct=a(114),ut=a.n(ct),mt=a(113),pt=a.n(mt);!function(e){e.available="available",e.selected="selected"}(Le||(Le={}));var dt,ht=Object(tt.a)((function(e){return Object(at.a)({root:{display:"flex",justifyContent:"center",flexWrap:"wrap",padding:e.spacing(.5)},chip:{margin:e.spacing(.5)},chipIcon:{backgroundColor:"inherit"}})})),ft=function(e){var t=ht();return i.a.createElement("div",{className:t.root},e.chipsArray.map((function(a,n){return i.a.createElement(lt.a,{key:"chip-to-".concat(e.chipType,"-").concat(n),color:"selected"===e.chipType?"primary":void 0,icon:"selected"===e.chipType?i.a.createElement(pt.a,{className:"chip-icon-no-bg"}):i.a.createElement(ut.a,null),label:a,className:t.chip,onClick:function(){return e.removeChip(a)}})})),e.children)};!function(e){e.available="available",e.selected="selected"}(dt||(dt={}));var gt,yt=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={availableCategories:ye,nameInput:e.props.playerInfo?e.props.playerInfo.name:"",numberOfRoundsInput:3,selectedCategories:ge,validateInputs:!1},e.handleNameInputChange=function(t){e.setState({nameInput:t.target.value})},e.handleNumberOfRoundsInputChange=function(t){var a=+t.target.value;a>=1&&a<=15&&e.setState({numberOfRoundsInput:a})},e.updateCategoryArrays=function(t,a){var n,r;a===dt.selected?(n=e.state.selectedCategories.filter((function(e){return e!==t})),(r=Object(Q.a)(e.state.availableCategories)).push(t)):(r=e.state.availableCategories.filter((function(e){return e!==t})),(n=Object(Q.a)(e.state.selectedCategories)).push(t)),e.setState({availableCategories:r,selectedCategories:n})},e.addCustomCategory=function(t){e.setState({availableCategories:[].concat(Object(Q.a)(e.state.availableCategories),[t])})},e.handleSubmit=function(t){t.preventDefault(),e.state.nameInput.trim()&&e.state.selectedCategories.length>=3?e.startNewGame():e.setState({nameInput:e.state.nameInput.trim(),validateInputs:!0})},e.startNewGame=function(){var t=e.props.playerInfo,a=e.props.playerIdCreationTimestamp,n=e.state,r=n.nameInput,i=n.numberOfRoundsInput,o=n.selectedCategories;We({id:t.id,idCreationTimestamp:a,name:r.trim()});var s=Object(y.a)();Be({gameId:s,idCreationTimestamp:ve(new Date),isPlayerAdmin:!0}),e.props.onSetGameData({gameConfig:{categories:o,letters:Ce(i),numberOfRounds:i},gameId:s,playerInfo:{id:t.id,isAdmin:!0,isRejoiningGame:!1,name:r.trim()}}),e.props.history.push("/play")},e.returnToDashboard=function(){e.props.history.push("/")},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t="Anzahl Runden (".concat(1,"-").concat(15,")"),a=i.a.createElement("form",{onSubmit:this.handleSubmit,className:"app-form",noValidate:!0,autoComplete:"off"},i.a.createElement(De.a,{name:"nameInput",label:"Spielername (max. 20 Zeichen)",value:this.state.nameInput,onChange:this.handleNameInputChange,className:"app-form-input",variant:"outlined",fullWidth:!0,required:!0,autoFocus:!0,error:this.state.validateInputs&&!this.state.nameInput,inputProps:{maxLength:"20"}}),i.a.createElement(De.a,{name:"numberOfRoundsInput",label:t,type:"number",value:this.state.numberOfRoundsInput,onChange:this.handleNumberOfRoundsInputChange,variant:"outlined",fullWidth:!0,required:!0,inputProps:{min:1,max:15}}),i.a.createElement("p",{className:"category-array-label"},"Ausgew\xe4hlte Kategorien (mind. 3):"),i.a.createElement(ft,{chipsArray:this.state.selectedCategories,chipType:Le.selected,removeChip:function(t){return e.updateCategoryArrays(t,dt.selected)}}),i.a.createElement("p",{className:"category-array-label"},"Verf\xfcgbare Kategorien:"),i.a.createElement(ft,{chipsArray:this.state.availableCategories,chipType:Le.available,removeChip:function(t){return e.updateCategoryArrays(t,dt.available)}},i.a.createElement(st,{addCustomCategory:this.addCustomCategory})),i.a.createElement("div",{className:"button-wrapper add-margin-top"},i.a.createElement(b.a,{type:"submit",color:"primary",variant:"contained",size:"large",startIcon:i.a.createElement(Ve.a,null)},"Spiel erstellen")));return i.a.createElement("div",{className:"main-content-wrapper"},this.props.gameId?i.a.createElement(_e,{context:be.newgame}):null,i.a.createElement("div",{className:"material-card-style"},i.a.createElement(V,{showDivider:!0,text:"Neues Spiel"}),a),i.a.createElement(ce,{onReturnToDashboard:this.returnToDashboard}))}},{key:"componentDidUpdate",value:function(e){this.props.playerInfo&&this.props.playerInfo!==e.playerInfo&&this.setState({nameInput:this.props.playerInfo.name})}}]),a}(r.Component),bt=Object(h.b)((function(e){return{gameId:e.gameId,playerIdCreationTimestamp:e.playerIdCreationTimestamp,playerInfo:e.playerInfo}}),(function(e){return{onSetGameData:function(t){return e(ue(t))}}}))(yt),vt=a(116),Et=a.n(vt),It=a(73),Ct=a(119),wt=a.n(Ct),Ot=a(118),St=a.n(Ot),kt=Object(tt.a)((function(e){return Object(at.a)({adminPanel:{position:"absolute",top:"1rem",right:"1rem"},menuButton:{background:"radial-gradient(circle, rgba(255,255,255,1) 0%, rgba(255,255,255,0.5) 35%, rgba(255,255,255,0) 60%);"},dialogContent:{maxWidth:"23rem"},dialogContentText:{color:"black"}})})),Rt=function(e){var t=kt(),a=e.onClose,n=e.open;return i.a.createElement(Ze.a,{onClose:function(){return a(!1)},open:n},i.a.createElement(Ye.a,{classes:{root:t.dialogContent}},e.playerToBeKicked?i.a.createElement($e.a,{classes:{root:t.dialogContentText}},'"With great power comes great responsibility" \u2013 Willst du ',e.playerToBeKicked.name," wirklich aus dem Spiel werfen?"):null),i.a.createElement(Qe.a,null,i.a.createElement(b.a,{type:"button",onClick:function(){return a(!1)}},"Abbrechen"),i.a.createElement(b.a,{type:"button",color:"primary",onClick:function(){return a(!0)}},"Rauswerfen")))},Pt=function(e){var t=kt(),a=Object(r.useState)(null),n=Object(Je.a)(a,2),o=n[0],s=n[1],l=Object(r.useState)(!1),c=Object(Je.a)(l,2),u=c[0],m=c[1],p=Object(r.useState)(null),d=Object(Je.a)(p,2),h=d[0],f=d[1],g=new Map;e.allPlayers.forEach((function(e,t){e.isAdmin||g.set(t,e)}));var y=we(g);return i.a.createElement("div",{className:t.adminPanel},i.a.createElement(et.a,{className:t.menuButton,title:"Admin-Panel \xf6ffnen","aria-label":"Admin-Panel \xf6ffnen","aria-controls":"admin-panel","aria-haspopup":"true",onClick:function(e){s(e.currentTarget)}},i.a.createElement(St.a,{color:"primary"})),i.a.createElement(v.a,{id:"admin-panel",anchorEl:o,keepMounted:!0,open:Boolean(o),onClose:function(){s(null)}},y.map((function(e,t){return i.a.createElement(E.a,{key:"menu-item-delete-player-".concat(t),title:"".concat(e.name," aus dem Spiel werfen"),onClick:function(){return t=e,s(null),f(t),void m(!0);var t}},i.a.createElement(te.a,null,i.a.createElement(wt.a,{color:"secondary"})),i.a.createElement(ae.a,{primary:e.name}))}))),i.a.createElement(Rt,{open:u,playerToBeKicked:h,onClose:function(t){m(!1),t&&h&&e.kickPlayer(h.id)}}))},Nt=(a(158),function(){function e(t,a){Object(c.a)(this,e),this.x=t,this.y=a,this.radius=3.5}return Object(u.a)(e,[{key:"draw",value:function(e){e.save(),e.translate(this.x,this.y),e.fillStyle="white",e.fillRect(0,0,this.radius,this.radius),e.restore()}}]),e}()),jt=function(){function e(t,a){var n=this;Object(c.a)(this,e),this.letters=t,this.callbackWhenAnimationDone=a,this.canvas=void 0,this.ctx=void 0,this.currentPos=void 0,this.width=void 0,this.height=void 0,this.particlePositions=void 0,this.particles=void 0,this.tmpCanvas=void 0,this.tmpCtx=void 0,this.time=void 0,this.counter=0,this.myInterval=void 0,this.activeTheme=void 0,this.animate=function(){requestAnimationFrame(n.animate),n.ctx.fillStyle=n.activeTheme.animationBackgroundColor,n.ctx.fillRect(0,0,n.width,n.height),n.animateParticles()},this.canvas=document.querySelector("#letter-animation-canvas"),this.ctx=this.canvas.getContext("2d");var r=document.querySelector("main");this.activeTheme=W.find((function(e){return r.classList.contains(e.className)})),this.width=r.offsetWidth,this.height=r.offsetHeight,this.particlePositions=[],this.particles=[],this.tmpCanvas=document.createElement("canvas"),this.tmpCtx=this.tmpCanvas.getContext("2d"),this.canvas.width=this.width,this.canvas.height=this.height,this.particlePositions=[],this.currentPos=0,this.time=""}return Object(u.a)(e,[{key:"init",value:function(){var e=this;this.myInterval=setInterval((function(){e.counter<e.letters.length&&(e.changeLetter(),e.getPixels(e.tmpCanvas,e.tmpCtx)),e.counter++,e.counter>e.letters.length+1&&(clearInterval(e.myInterval),e.callbackWhenAnimationDone())}),800),this.makeParticles(1e3),this.animate()}},{key:"changeLetter",value:function(){this.time=this.letters[this.currentPos],this.currentPos++,this.currentPos>=this.letters.length&&(this.currentPos=0)}},{key:"makeParticles",value:function(e){for(var t=0;t<=e;t++){var a=this.width/2+400*Math.random()-200,n=this.height/2+400*Math.random()-200;this.particles.push(new Nt(a,n))}}},{key:"getPixels",value:function(e,t){var a=this.time;e.width=window.innerWidth,e.height=window.innerHeight,t.fillStyle="red",t.font="italic bold 330px Noto Serif",t.fillText(a,e.width/2-t.measureText(a).width/2,e.height/2+100);var n=t.getImageData(0,0,e.width,e.height),r=new Uint32Array(n.data.buffer);this.particlePositions.length>0&&(this.particlePositions=[]);for(var i=0;i<e.height;i+=6)for(var o=0;o<e.width;o+=6)r[i*e.width+o]&&this.particlePositions.push({x:o,y:i})}},{key:"animateParticles",value:function(){for(var e,t,a=0,n=this.particles.length;a<n;a++)e=this.particles[a],t=this.particlePositions[a],this.particles.indexOf(e)===this.particlePositions.indexOf(t)&&(e.x+=.3*(t.x-e.x),e.y+=.3*(t.y-e.y),e.draw(this.ctx))}}]),e}(),Tt=function(e){var t=Object(Q.a)(fe).filter((function(t){return t!==e.letterToUnveil})),a=[].concat(Object(Q.a)(Ce(4,t)),[e.letterToUnveil]);return Object(r.useEffect)((function(){new jt(a,e.callbackWhenAnimationDone).init()})),i.a.createElement("canvas",{id:"letter-animation-canvas"})},At=a(213),xt=Object(tt.a)((function(e){return Object(at.a)({loadingScreen:{position:"absolute",top:"0",left:"0",height:"100%",width:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)"},loadingSpinner:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"60px"}})})),Ft=function(){var e=xt();return i.a.createElement("div",{className:e.loadingScreen},i.a.createElement("div",{className:e.loadingSpinner},i.a.createElement(At.a,{color:"secondary",size:60})))},Dt=(a(159),a(4)),Mt=a(214),Gt=a(215),Lt=a(122),_t=a.n(Lt),zt=a(123),Wt=a.n(zt),Bt=a(121),Kt=a.n(Bt),Ut=a(81),qt=a.n(Ut),Ht=a(120),Vt=a.n(Ht),Jt=Object(tt.a)((function(e){return Object(at.a)({centerContent:{display:"flex",justifyContent:"center"},chip:{height:"3rem",marginTop:"1rem",borderRadius:"5px",fontSize:"1.2rem",boxShadow:"0 2px 4px rgba(0,0,0,.501961)"}})})),Zt=function(e){var t=Jt(),a=e.currentLetter,n=e.currentRound,r=e.numberOfRounds;return i.a.createElement("div",{className:t.centerContent},i.a.createElement(lt.a,{color:"primary",icon:i.a.createElement(Vt.a,null),label:"Runde ".concat(n," von ").concat(r,": \u201e").concat(a,"\u201c"),className:t.chip}))},Yt=Object(Dt.a)((function(e){return Object(at.a)({badge:{right:-3,top:"100%",border:"2px solid ".concat(e.palette.background.paper),padding:"0 4px"}})}))(Mt.a),$t=function(e){var t=Object(r.useState)(e.playersThatFinishedEvaluation.has(e.playerInfo.id)),a=Object(Je.a)(t,2),n=a[0],o=a[1],s=e.allPlayers,l=e.currentRound,c=e.currentRoundEvaluation,u=e.gameConfig,m=e.playerInfo,p=e.playersThatFinishedEvaluation,d=Re(s.size),h=e.gameRounds[l-1],f=u.letters[l-1],g=we(s),y=[];g.forEach((function(e){p.has(e.id)||y.push(e.name)}));var b=function(t,a){var r=g[a],o=c.get(r.id)[t],l=o.get(m.id),u=function(e,t){var a=new Map;return e.forEach((function(e,n){if(!e){var r=t.get(n);r&&a.set(n,r)}})),we(a)}(o,s),p=0===u.length?"Keine Ablehnungen":"Abgelehnt von "+u.map((function(e){return e.name})).join(", "),d=!!h.get(r.id)[t].text,f=i.a.createElement(Xe.a,{key:"slf-evaluation-tooltip-".concat(t,"-").concat(a),title:p},i.a.createElement(et.a,{className:"slf-evaluation-button",color:l?"default":"secondary",onClick:function(){return function(t,a,r){n||e.updateEvaluationOfPlayerInput({categoryIndex:t,evaluatedPlayerId:a,markedAsValid:!r})}(t,r.id,l)}},i.a.createElement(Yt,{badgeContent:u.length,color:"secondary"},i.a.createElement(qt.a,null)))),y=i.a.createElement(Xe.a,{key:"slf-evaluation-tooltip-".concat(t,"-").concat(a),title:"Automatisch abgelehnt"},i.a.createElement(qt.a,{color:"secondary",className:"slf-auto-reject-icon"}));return i.a.createElement("div",{key:"slf-evaluation-button-wrapper-".concat(t,"-").concat(a),className:"slf-evaluation-button-wrapper"},d?f:y)},v=function(e,t){var a=g[t],n=!!h.get(a.id)[e].text,r=Pe(c.get(a.id)[e])<d;return i.a.createElement("div",{key:"slf-evaluation-textfield-wrapper-".concat(e,"-").concat(t),className:"slf-evaluation-textfield-wrapper"},i.a.createElement(De.a,{key:"slf-textfield-category-no-"+e+"-player-"+t,value:h.get(a.id)[e].text,variant:"outlined",fullWidth:!0,InputProps:{startAdornment:i.a.createElement(Gt.a,{position:"start"},a.name,":"),className:n&&r?"":"invalid-player-input"}}),n?function(e,t){var a=u.categories[e],n=g[t],r=h.get(n.id)[e].text,o="https://www.ecosia.org/search?q=".concat(encodeURIComponent(a),"+").concat(encodeURIComponent(r));return i.a.createElement("div",{key:"slf-search-link-container-".concat(e,"-").concat(t),className:"slf-search-link-container"},i.a.createElement("a",{key:"slf-evaluation-search-link-".concat(e,"-").concat(t),className:"slf-evaluation-search-link",href:o,target:"_blank",rel:"noopener noreferrer","aria-label":"Begriff nachschlagen"},i.a.createElement(Xe.a,{title:"Begriff nachschlagen",placement:"right"},i.a.createElement(Kt.a,{color:"primary"}))))}(e,t):null,b(e,t))};return i.a.createElement(i.a.Fragment,null,i.a.createElement(Zt,{currentLetter:f,currentRound:l,numberOfRounds:u.numberOfRounds}),i.a.createElement("form",{className:"app-form",noValidate:!0,autoComplete:"off"},u.categories.map((function(e,t){return i.a.createElement("div",{key:"slf-evaluation-for-category-no-"+t,className:"material-card-style"},i.a.createElement(V,{showDivider:!1,text:e}),g.map((function(e,a){return v(t,a)})))})),i.a.createElement("div",{className:"material-card-style"},"Best\xe4tigung ausstehend: ",i.a.createElement("span",{className:"bold-text"},y.join(", ")),"."),i.a.createElement(et.a,{type:"button",className:"fixed-bottom-right-button",color:"secondary",title:"Best\xe4tigen","aria-label":"Best\xe4tigen",onClick:function(){n||(o(!0),e.sendEvaluationFinishedMessage())}},n?i.a.createElement(_t.a,null):i.a.createElement(Wt.a,null))))},Qt=a(124),Xt=a.n(Qt),ea=function(e){var t=e.currentRound,a=e.gameConfig,n=e.gameRoundInputs,r=a.letters[t-1];return i.a.createElement(i.a.Fragment,null,i.a.createElement(Zt,{currentLetter:r,currentRound:t,numberOfRounds:a.numberOfRounds}),i.a.createElement("form",{className:"app-form",noValidate:!0,autoComplete:"off"},a.categories.map((function(t,a){return i.a.createElement("div",{key:"slf-input-for-category-no-"+a,className:"material-card-style"},i.a.createElement(V,{showDivider:!1,text:t}),i.a.createElement(De.a,{value:n[a].text,onChange:function(t){return function(t,a){var r=Object(Q.a)(n);r[a]=Object(me.a)({},r[a],{text:t.target.value}),e.updateCurrentRoundInputs(r)}(t,a)},variant:"outlined",fullWidth:!0,InputProps:{startAdornment:i.a.createElement(Gt.a,{position:"start"},r,":")}}))})),i.a.createElement(et.a,{type:"button",className:"fixed-bottom-right-button",color:"secondary",title:"Abschicken","aria-label":"Abschicken",onClick:function(){return e.sendRoundFinishedMessage()}},i.a.createElement(Xt.a,null))))},ta=(a(160),a(126)),aa=a.n(ta);!function(e){e.startGame="startGame",e.roundFinished="roundFinished",e.currentRoundInputs="currentRoundInputs",e.evaluationOfPlayerInput="evaluationOfPlayerInput",e.evaluationFinished="evaluationFinished",e.kickPlayer="kickPlayer",e.requestGameData="requestGameData",e.dataForCurrentGame="dataForCurrentGame"}(gt||(gt={}));var na=function(){function e(t){Object(c.a)(this,e),this.payload=t}return Object(u.a)(e,[{key:"toPubNubMessage",value:function(){return{type:gt.currentRoundInputs,payload:this.payload}}}]),e}(),ra=function(){function e(t){Object(c.a)(this,e),this.payload=t}return Object(u.a)(e,[{key:"toPubNubMessage",value:function(){return{type:gt.evaluationOfPlayerInput,payload:this.payload}}}]),e}(),ia=function(){function e(t){Object(c.a)(this,e),this.payload=t}return Object(u.a)(e,[{key:"toPubNubMessage",value:function(){return{type:gt.kickPlayer,payload:this.payload}}}]),e}(),oa=function(){function e(t){Object(c.a)(this,e),this.payload=t}return Object(u.a)(e,[{key:"toPubNubMessage",value:function(){return{type:gt.dataForCurrentGame,payload:this.payload}}}]),e}(),sa=(a(161),a(222)),la=a(220),ca=a(125),ua=a.n(ca),ma=function(e){var t=Object(r.useState)(!1),a=Object(Je.a)(t,2),n=a[0],o=a[1],s=window.location.href,l=s.slice(0,s.length-5)+"/joingame?id="+e.gameId;return i.a.createElement(i.a.Fragment,null,i.a.createElement("p",{className:"join-game-link-label"},"Teile diesen Link mit Freunden:"),i.a.createElement(sa.a,{name:"idInput",value:l,className:"app-form-input",disabled:!0,fullWidth:!0,endAdornment:i.a.createElement(Gt.a,{position:"end"},i.a.createElement(et.a,{title:"Link kopieren","aria-label":"Link kopieren",onClick:function(){!function(e){var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}(l),o(!0)}},i.a.createElement(ua.a,null)))}),i.a.createElement(la.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:n,autoHideDuration:1500,onClose:function(){o(!1)},message:"Der Link wurde in Zwischenablage kopiert."}))},pa=Object(tt.a)((function(e){return Object(at.a)({root:{display:"flex",flexWrap:"wrap",padding:e.spacing(.5)},chip:{margin:e.spacing(.5)}})})),da=function(e){var t=pa(),a=we(e.players);return i.a.createElement("div",{className:t.root},a.map((function(e,a){return i.a.createElement(lt.a,{key:"player-name-".concat(a),icon:i.a.createElement(re.a,null),color:e.isAdmin?"secondary":"primary",label:e.isAdmin?"".concat(e.name," (Admin)"):e.name,className:t.chip})})))},ha=function(e){var t=e.allPlayers,a=e.gameId,n=e.playerInfo,r=i.a.createElement("p",{className:"wait-for-start-animation"},"Warte auf Spielbeginn ",i.a.createElement("span",null,"."),i.a.createElement("span",null,"."),i.a.createElement("span",null,"."));return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"material-card-style"},i.a.createElement(V,{showDivider:!0,text:"Gleich geht's los..."}),i.a.createElement("div",{className:"players-wrapper"},i.a.createElement("h3",null,"Mitspieler (",e.allPlayers.size,"):"),i.a.createElement(da,{players:e.allPlayers})),e.gameConfig?function(){var t=e.gameConfig;return i.a.createElement(i.a.Fragment,null,i.a.createElement(H.a,null),i.a.createElement("h3",null,"Spiele-Settings:"),i.a.createElement("p",null,"Runden: ",t.numberOfRounds),i.a.createElement("p",null,"Kategorien: ",t.categories.join(", ")))}():null,i.a.createElement(H.a,null),n.isAdmin?i.a.createElement("div",{className:"button-wrapper add-margin-top"},i.a.createElement(b.a,{color:"primary",variant:"contained",size:"large",startIcon:i.a.createElement(aa.a,null),disabled:t.size<2,onClick:function(){return e.sendMessage({type:gt.startGame})}},"Starten")):r),n.isAdmin?i.a.createElement("div",{className:"material-card-style"},i.a.createElement(ma,{gameId:a})):null)},fa=i.a.memo((function(e){var t=Object(It.b)(),a=function(){var a;a=e.playerInfo.isAdmin?{gameConfig:e.gameConfig,playerInfo:e.playerInfo}:{playerInfo:e.playerInfo},t.setState({channels:[e.gameChannel],state:a})},n=function(){t.hereNow({channels:[e.gameChannel],includeUUIDs:!0,includeState:!0},(function(t,a){if(console.log("PubNub hereNow",a),e.playerInfo.isRejoiningGame&&a.totalOccupancy<=1)e.navigateToDashboard();else{var n=a.channels[e.gameChannel];if(n){var r=[];n.occupants.forEach((function(e){var t=e.state;t&&t.playerInfo&&r.push(t)})),e.addPlayers.apply(e,r)}}}))};return Object(r.useEffect)((function(){var r={message:function(t){console.log("PubNub message event",t),t.message.type&&e.processPubNubMessage(t)},presence:function(t){if(console.log("PubNub presence event",t),"state-change"===t.action){var a=t.state;a.playerInfo.id!==e.playerInfo.id&&e.addPlayers(a)}},status:function(r){console.log("PubNub status event",r),"PNConnectedCategory"===r.category&&(console.log("Player is connected to PubNub game channel"),t.history({channel:e.gameChannel,count:10},(function(t,r){!e.playerInfo.isRejoiningGame&&r.messages.length>0?e.navigateToDashboard():e.playerInfo.isRejoiningGame||(a(),n(),setTimeout(n,3e3))})))}};return t.addListener(r),t.subscribe({channels:[e.gameChannel],withPresence:!0}),function(){t.removeListener(r),t.unsubscribeAll()}})),null})),ga=a(162),ya={publishKey:ga.publishKey,subscribeKey:ga.subscribeKey,uuid:void 0,ssl:!0},ba=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={allPlayers:new Map,currentPhase:z.waitingToStart,currentRound:1,currentRoundEvaluation:new Map,currentRoundInputs:[],gameConfig:null,gameRounds:[],playersThatFinishedEvaluation:new Map,showLetterAnimation:!1,showLoadingScreen:!0},e.pubNubClient=void 0,e.sendMessage=function(t){e.pubNubClient.publish({channel:e.props.gameId,message:t,storeInHistory:!0,ttl:1},(function(e,t){return console.log("PubNub Publish:",e,t)}))},e.callbackWhenAnimationDone=function(){e.setState({showLetterAnimation:!1})},e.navigateToDashboard=function(){Ke(),e.props.onResetAppState(),e.props.history.push("/")},e.addPlayers=function(){if(e.state.currentPhase===z.waitingToStart){for(var t=null,a=Object(pe.cloneDeep)(e.state.allPlayers),n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];r.forEach((function(n){a.set(n.playerInfo.id,n.playerInfo),n.gameConfig&&!e.state.gameConfig&&(t=n.gameConfig)})),t?e.setState({allPlayers:a,gameConfig:t,showLoadingScreen:!1}):e.setState({allPlayers:a})}},e.processPubNubMessage=function(t){var a=t.message;switch(a.type){case gt.startGame:e.startGame();break;case gt.roundFinished:e.stopRoundAndSendInputs();break;case gt.currentRoundInputs:e.addPlayerInputForFinishedRound(t.publisher,a.payload);break;case gt.evaluationOfPlayerInput:e.processEvaluationOfPlayerInput(t.publisher,a.payload);break;case gt.evaluationFinished:e.countPlayerAsEvaluationFinished(t.publisher);break;case gt.kickPlayer:e.removePlayerFromGame(a.payload);break;case gt.requestGameData:Te(e.props.playerInfo,e.state.allPlayers,t.publisher)&&(e.state.allPlayers.has(t.publisher)?e.sendDataForCurrentGame(t.publisher):e.sendKickPlayerMessage(t.publisher));break;case gt.dataForCurrentGame:e.processDataForCurrentGame(a.payload)}},e.startGame=function(){var t=e.state.gameConfig,a=Oe(t.categories.length);e.setState({currentPhase:z.fillOutTextfields,currentRoundInputs:a,showLetterAnimation:!0})},e.updateCurrentRoundInputs=function(t){e.setState({currentRoundInputs:t})},e.sendRoundFinishedMessage=function(){e.setState({showLoadingScreen:!0}),e.sendMessage({type:gt.roundFinished})},e.stopRoundAndSendInputs=function(){var t=[].concat(Object(Q.a)(e.state.gameRounds),[new Map]),a=ke(e.state.allPlayers,e.state.gameConfig.categories);e.setState({currentRoundEvaluation:a,gameRounds:t,showLoadingScreen:!0});var n=new na(Se(e.state.currentRoundInputs));e.sendMessage(n.toPubNubMessage())},e.addPlayerInputForFinishedRound=function(t,a){var n=Object(pe.cloneDeep)(e.state.gameRounds);n[e.state.currentRound-1].set(t,a),n[e.state.currentRound-1].size===e.state.allPlayers.size?e.setState({currentPhase:z.evaluateRound,gameRounds:n,showLoadingScreen:!1}):e.setState({gameRounds:n})},e.updateEvaluationOfPlayerInput=function(t){var a=new ra(t);e.sendMessage(a.toPubNubMessage())},e.processEvaluationOfPlayerInput=function(t,a){var n=Object(pe.cloneDeep)(e.state.currentRoundEvaluation),r=n.get(a.evaluatedPlayerId);r&&r[a.categoryIndex].set(t,a.markedAsValid),e.setState({currentRoundEvaluation:n})},e.sendEvaluationFinishedMessage=function(){return e.sendMessage({type:gt.evaluationFinished})},e.countPlayerAsEvaluationFinished=function(t){var a=Object(pe.cloneDeep)(e.state.playersThatFinishedEvaluation);a.set(t,!0),a.size===e.state.allPlayers.size?e.processEvaluationsAndStartNextRoundOrFinishGame():e.setState({playersThatFinishedEvaluation:a})},e.processEvaluationsAndStartNextRoundOrFinishGame=function(){var t=e.state,a=t.allPlayers,n=t.currentRound,r=t.currentRoundEvaluation,i=t.gameRounds,o=e.state.gameConfig,s=Object(pe.cloneDeep)(i);s[n-1]=Ne(i[n-1],r,Re(a.size)),n===o.numberOfRounds?(Ke(),e.props.onSetDataOfFinishedGame({allPlayers:a,gameConfig:o,gameRounds:s}),e.props.history.push("/results")):e.setState({currentPhase:z.fillOutTextfields,currentRoundEvaluation:ke(a,o.categories),currentRoundInputs:Oe(o.categories.length),currentRound:n+1,gameRounds:s,playersThatFinishedEvaluation:new Map,showLetterAnimation:!0})},e.sendKickPlayerMessage=function(t){var a=new ia(t);e.sendMessage(a.toPubNubMessage())},e.removePlayerFromGame=function(t){if(e.props.playerInfo.id===t)return Ke(),e.props.onResetAppState(),void e.props.history.push("/");if(e.state.allPlayers.has(t)){var a=Object(pe.cloneDeep)(e.state.allPlayers);a.delete(t);var n=Object(pe.cloneDeep)(e.state.currentRoundEvaluation);n.delete(t);var r=Object(pe.cloneDeep)(e.state.gameRounds);r.forEach((function(e){return e.delete(t)}));var i=Object(pe.cloneDeep)(e.state.playersThatFinishedEvaluation);i.delete(t),e.setState({allPlayers:a,currentRoundEvaluation:n,gameRounds:r,playersThatFinishedEvaluation:i}),e.state.currentPhase===z.evaluateRound&&i.size===a.size&&e.processEvaluationsAndStartNextRoundOrFinishGame()}},e.sendDataForCurrentGame=function(t){var a=new Map;e.state.currentRoundEvaluation.forEach((function(e,t){a.set(t,e.map((function(e){return Ie(e)})))}));var n=new oa({allPlayers:Ie(e.state.allPlayers),currentPhase:e.state.currentPhase,currentRound:e.state.currentRound,currentRoundEvaluation:Ie(a),gameConfig:e.state.gameConfig,gameRounds:e.state.gameRounds.map((function(e){return Ie(e)})),playersThatFinishedEvaluation:Ie(e.state.playersThatFinishedEvaluation),requestingPlayerId:t});e.sendMessage(n.toPubNubMessage())},e.processDataForCurrentGame=function(t){if(e.props.playerInfo.id===t.requestingPlayerId){var a=Ee(t.currentRoundEvaluation),n=new Map;a.forEach((function(e,t){n.set(t,e.map((function(e){return Ee(e)})))})),e.setState({allPlayers:Ee(t.allPlayers),currentPhase:t.currentPhase,currentRound:t.currentRound,currentRoundEvaluation:n,currentRoundInputs:Oe(t.gameConfig.categories.length),gameConfig:t.gameConfig,gameRounds:t.gameRounds.map((function(e){return Ee(e)})),playersThatFinishedEvaluation:Ee(t.playersThatFinishedEvaluation),showLoadingScreen:!1})}},e}return Object(u.a)(a,[{key:"render",value:function(){if(null===this.props.gameId||null===this.props.playerInfo)return null;var e=this.props,t=e.gameId,a=e.playerInfo,n=this.state,r=n.showLetterAnimation,o=n.showLoadingScreen;this.pubNubClient||(this.pubNubClient=new Et.a(Object(me.a)({},ya,{uuid:a.id})));var s=null;switch(this.state.currentPhase){case z.waitingToStart:s=i.a.createElement(ha,{allPlayers:this.state.allPlayers,gameConfig:this.state.gameConfig,gameId:t,playerInfo:a,sendMessage:this.sendMessage});break;case z.fillOutTextfields:s=i.a.createElement(ea,{currentRound:this.state.currentRound,gameConfig:this.state.gameConfig,gameRoundInputs:this.state.currentRoundInputs,updateCurrentRoundInputs:this.updateCurrentRoundInputs,sendRoundFinishedMessage:this.sendRoundFinishedMessage});break;case z.evaluateRound:s=i.a.createElement($t,{allPlayers:this.state.allPlayers,currentRound:this.state.currentRound,currentRoundEvaluation:this.state.currentRoundEvaluation,gameConfig:this.state.gameConfig,gameRounds:this.state.gameRounds,playerInfo:a,playersThatFinishedEvaluation:this.state.playersThatFinishedEvaluation,updateEvaluationOfPlayerInput:this.updateEvaluationOfPlayerInput,sendEvaluationFinishedMessage:this.sendEvaluationFinishedMessage})}var l=i.a.createElement(Tt,{letterToUnveil:this.state.gameConfig?this.state.gameConfig.letters[this.state.currentRound-1]:"",callbackWhenAnimationDone:this.callbackWhenAnimationDone}),c=i.a.createElement(Pt,{allPlayers:this.state.allPlayers,kickPlayer:this.sendKickPlayerMessage});return i.a.createElement(It.a,{client:this.pubNubClient},i.a.createElement(fa,{gameChannel:this.props.gameId,gameConfig:this.props.gameConfig,playerInfo:this.props.playerInfo,navigateToDashboard:this.navigateToDashboard,addPlayers:this.addPlayers,processPubNubMessage:this.processPubNubMessage}),r?l:null,o?i.a.createElement(Ft,null):null,o||r?null:i.a.createElement("div",{className:"main-content-wrapper"},s),a.isAdmin&&this.state.allPlayers.size>1?c:null)}},{key:"componentDidMount",value:function(){var e=this.props,t=e.gameConfig,a=e.gameId,n=e.playerInfo;if(null!==a&&null!==n){var r=Object(pe.cloneDeep)(this.state.allPlayers);r.set(n.id,n),!n.isRejoiningGame&&n.isAdmin?this.setState({allPlayers:r,gameConfig:t,showLoadingScreen:!1}):this.setState({allPlayers:r}),n.isRejoiningGame&&this.sendMessage({type:gt.requestGameData})}else this.props.history.push("/")}}]),a}(r.Component),va=Object(h.b)((function(e){return{gameConfig:e.gameConfig,gameId:e.gameId,playerInfo:e.playerInfo}}),(function(e){return{onSetDataOfFinishedGame:function(t){return e(function(e){return{type:"SET_DATA_OF_FINISHED_GAME",payload:e}}(t))},onResetAppState:function(){return e({type:"RESET_APP_STATE"})}}}))(ba),Ea=a(163),Ia=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={activeTheme:W[0]},e.switchThemeHandler=function(t){e.setState({activeTheme:t}),ze(t.id)},e}return Object(u.a)(a,[{key:"render",value:function(){return i.a.createElement(d.a,{theme:this.state.activeTheme.muiTheme},i.a.createElement("div",{className:"app-container"},i.a.createElement(U,{theme:this.state.activeTheme,switchTheme:this.switchThemeHandler}),i.a.createElement("main",{className:"app-main "+this.state.activeTheme.className,style:this.state.activeTheme.style},i.a.createElement(f.a,{basename:"/stadt-land-fluss"},i.a.createElement(g.c,null,i.a.createElement(g.a,{path:"/",exact:!0,component:$}),i.a.createElement(g.a,{path:"/newgame",exact:!0,component:bt}),i.a.createElement(g.a,{path:"/joingame",exact:!0,component:qe}),i.a.createElement(g.a,{path:"/play",exact:!0,component:va}),i.a.createElement(g.a,{path:"/results",exact:!0,component:xe}))))))}},{key:"componentDidMount",value:function(){Ea.disable();var e=localStorage.getItem("SLF-APP-THEME");if(e){var t=W.find((function(t){return t.id===e}));t&&this.setState({activeTheme:t})}var a=function(){var e=localStorage.getItem("SLF-PLAYER-INFO");return e?JSON.parse(e):null}(),n=ve(new Date);(!a||n-a.idCreationTimestamp>604800)&&(a={id:Object(y.a)(),idCreationTimestamp:n,name:a?a.name:""},We(a)),this.props.onSetStoredPlayerInfo(a);var r=function(){var e=localStorage.getItem("SLF-RUNNING-GAME-INFO");return e?JSON.parse(e):null}();r&&(n-r.idCreationTimestamp<=3600?this.props.onSetStoredRunningGameInfo(r):Ke())}}]),a}(r.Component),Ca=Object(h.b)(null,(function(e){return{onSetStoredPlayerInfo:function(t){return e(function(e){return{type:"SET_STORED_PLAYER_INFO",payload:e}}(t))},onSetStoredRunningGameInfo:function(t){return e(function(e){return{type:"SET_STORED_RUNNING_GAME_INFO",payload:e}}(t))}}}))(Ia);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var wa={allPlayers:null,gameId:null,gameConfig:null,gameRounds:null,playerIdCreationTimestamp:0,playerInfo:null},Oa=Object(l.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_STORED_PLAYER_INFO":var a=t.payload;return Object(me.a)({},e,{playerIdCreationTimestamp:a.idCreationTimestamp,playerInfo:{id:a.id,isAdmin:!1,isRejoiningGame:!1,name:a.name}});case"SET_STORED_RUNNING_GAME_INFO":var n=t.payload;return Object(me.a)({},e,{gameId:n.gameId,playerInfo:Object(me.a)({},e.playerInfo,{isAdmin:n.isPlayerAdmin,isRejoiningGame:!0})});case"SET_DATA_FOR_NEW_GAME":return Object(me.a)({},e,{},t.payload);case"SET_DATA_OF_FINISHED_GAME":return Object(me.a)({},e,{},t.payload,{gameId:null});case"RESET_APP_STATE":return Object(me.a)({},e,{allPlayers:null,gameId:null,gameConfig:null,gameRounds:null});default:return e}}));s.a.render(i.a.createElement(h.a,{store:Oa},i.a.createElement(Ca,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[136,1,2]]]);
//# sourceMappingURL=main.bc8c1790.chunk.js.map